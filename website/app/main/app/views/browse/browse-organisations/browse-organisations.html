<div layout="row" layout-align="center" class="m-b-30">
    <div class="md-content-container" layout="column" layout-align="center center">
        <h1 class="md-display-1 text-center m-t-50">Organisations</h1>
        <div class="md-title text-grey light-font text-center">Browse top organisations - explore their projects, jobs and forum.</div>
        <a class="text-green text-center m-t-15" ng-click="newOrganisation($event)">Create an organisation</a>
    </div>
</div>


<!--
<div class="infobar m-b-30 p-v-15 overflow-x-box" layout="row" layout-align="center">
    <div class="md-content-container md-row text-center" layout="column" layout-gt-sm="row">
        <div flex="100" flex-gt-sm="33" class="md-col" layout="column">
            <h2 class="md-title bold">Start a discussion</h2>
            <p>Got news or an event coming up?<br>Post about something interesting.</p>
        </div>
        <div flex="100" flex-gt-sm="33" class="md-col" layout="column">
            <h2 class="md-title bold">Ask anything</h2>
            <p>Link your project and ask a question. <br>Ask for help, feedback or collaborators.</p>
        </div>
        <div flex="100" flex-gt-sm="33" class="md-col" layout="column">
            <h2 class="md-title bold">Get your answer.</h2>
            <p>Expect a response in less than 24 hrs. <br>Get your results faster.</p>
        </div>
    </div>
</div>
-->

<div layout="row" layout-align="center" class="m-t-15 overflow-x-box">
    <div class="md-content-container md-no-padding m-b-60 rel-box" layout="column">
        <div class="md-row" layout="row">
            <div hide-sm class="md-col" style="width: 300px">
               <div class="m-b-30">
                    <div class="md-subhead m-b-10">Search Organisations</div>
                    <div class="well-input">
                        <input type="text" ng-model="searchFilter.model" ng-change="searchFilter.onChange()" placeholder="Query organisations">
                        <md-icon md-svg-icon="search"></md-icon>
                    </div>
                </div>
                <div class="m-b-30">
                    <div class="md-subhead m-b-10">Create an organisation</div>
                    <div class="well" layout="column">
                        <div class="text-lightgrey m-b-15">
                            Is your team missing? Add your team or organisation and join the community making space happen.
                        </div>
                        <md-button authenticate class="md-accent md-raised md-flat md-cornered md-md m-0" ng-click="newOrganisation($event)">Create an organisation</md-button>
                    </div>
                </div>
                <div class="md-subhead m-b-10">Sort by field</div>
                <div class="well m-b-30" layout="column">
                    <md-radio-group class="md-compact" ng-model="fieldFilter.current" ng-change="fieldFilter.change(fieldFilter.current)">
                        <md-radio-button value="" class="md-accent">All</md-radio-button>
                        <md-radio-button ng-repeat="field in fieldFilter.options" value="{{field._id}}" class="md-accent">{{field.name | letters: 23}} ({{field.numOrganisations}})</md-radio-button>
                    </md-radio-group>
                </div>
                <div class="m-b-30">
                    <div class="md-subhead m-b-10">Organisation Map</div>
                    <div class="well" layout="column">
                        <div class="text-lightgrey m-b-15">
                            Want to find organisations in a specific location?
                        </div>
                        <md-button class="md-accent md-raised md-flat md-cornered md-md m-0" ui-sref="app.map({type: 'organisation'})">Explore the map</md-button>
                    </div>
                </div>
            </div>
            <div flex class="md-col rel-box" layout="column">
                <div class="rel-box" style="min-height: 100px;">
                    <div class="md-subhead m-b-10">Top organisations</div>
                    <table class="md-table">
                        <thead>
                            <tr>
                                <td style="width: 40px;"></td>
                                <td>Name</td>
                                <td filter-column-order filter-object="orderFilter" filter-model="followers" style="width: 100px;" class="text-center">Followers</td>
                                <td filter-column-order filter-object="orderFilter" filter-model="numProjects" style="width: 100px;" class="text-center">Projects</td>
                                <td hide-sm style="width: 75px;"></td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in query.results">
                                <td style="padding: 15px 20px 15px 5px;">
                                    <a ui-sref="app.organisation.overview({stub:item.stub})">
                                        <div class="avatar-square-contain" ng-style="item.picture && { 'background-image':'url('+item.picture+'?size=thumb&crop=true)'}"></div>
                                    </a>
                                </td>
                                <td>
                                    <a ui-sref="app.organisation.overview({stub:item.stub})">{{item.name}}</a>
                                </td>
                                <td class="text-center">
                                    <a class="" stat-display-modal type="follow" parent-type="organisation" parent-id="{{item._id}}">{{item.followers}}</a>
                                </td>
                                <td class="text-center">
                                    <a class="" ui-sref="app.organisation.projects({stub:item.stub})">{{item.numProjects}}</a>
                                </td>
                                <td hide-sm>
                                    <stat-button hide-stat="true" size="sm" type="follow" parent-type="organisation" parent-id="{{item._id}}" count="item.followers"></stat-button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <loading-overlay ng-if="query.loading" ng-class="{'translucent' : query.results.length > 0}"></loading-overlay>
                    <div ng-hide="query.notEnoughResults">
                        <a class="well-button m-v-40 " layout="row" layout-align="center center" ng-click="query.more()" ng-disabled="query.noMoreResults">
                            <div>{{query.noMoreResults ? 'No more organisations' : 'See more organisations'}}</div>
                        </a>
                    </div>
                    <div ng-show="query.notEnoughResults" class="text-lightgrey m-v-40">
                        No more results. <a class="underlined text-green" ng-click="clearFilter()">Clear filters</a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
