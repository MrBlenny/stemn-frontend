'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Component = undefined;

var _index = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _system = require('app/shared/actions/system');

var SystemActions = _interopRequireWildcard(_system);

var _state = require('app/shared/actions/state');

var StateActions = _interopRequireWildcard(_state);

var _ModalActions = require('app/renderer/main/modules/Modal/Modal.actions.js');

var ModalActions = _interopRequireWildcard(_ModalActions);

var _AutoLaunchActions = require('app/shared/modules/AutoLaunch/AutoLaunch.actions.js');

var AutoLaunchActions = _interopRequireWildcard(_AutoLaunchActions);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _ProjectSettingsPage = require('app/renderer/main/pages/ProjectPage/ProjectSettingsPage/ProjectSettingsPage.css');

var _ProjectSettingsPage2 = _interopRequireDefault(_ProjectSettingsPage);

var _reactReduxForm = require('react-redux-form');

var _reactRouter = require('react-router');

var _Toggle = require('app/renderer/main/components/Input/Toggle/Toggle');

var _Toggle2 = _interopRequireDefault(_Toggle);

var _ProgressButton = require('app/renderer/main/components/Buttons/ProgressButton/ProgressButton.jsx');

var _ProgressButton2 = _interopRequireDefault(_ProgressButton);

var _FileSelectInputElectron = require('app/renderer/main/modules/FileSelectInput/FileSelectInputElectron.jsx');

var _FileSelectInputElectron2 = _interopRequireDefault(_FileSelectInputElectron);

var _Checkbox = require('app/renderer/main/components/Input/Checkbox/Checkbox');

var _Checkbox2 = _interopRequireDefault(_Checkbox);

var _SimpleTable = require('app/shared/modules/Tables/SimpleTable/SimpleTable.jsx');

var _SimpleTable2 = _interopRequireDefault(_SimpleTable);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _components = {
  _component: {}
};

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/renderer/main/pages/SettingsPage/SettingsApplicationPage/SettingsApplicationPage.jsx',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/renderer/main/pages/SettingsPage/SettingsApplicationPage/SettingsApplicationPage.jsx',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2(_CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
} // Container Core


// Container Actions


// Component Core


// Styles


// Sub Components


///////////////////////////////// COMPONENT /////////////////////////////////


var inputStyles = {
  textTransform: 'capitalize',
  padding: '0 10px',
  height: '100%',
  background: 'rgba(0, 0, 0, 0.03)',
  borderRight: '1px solid rgb(234, 234, 234)',
  minWidth: '80px'
};

var Component = exports.Component = _wrapComponent('_component')(_react3.default.createClass({
  displayName: 'Component',
  componentDidMount: function componentDidMount() {
    this.props.autoLaunchActions.getStatus();
  },
  confirmReset: function confirmReset() {
    this.props.modalActions.showConfirm({
      message: 'This will clear all data and reset the application back to factory settings. This can be useful if some data has been corrupted.',
      modalConfirm: StateActions.clearState()
    });
  },
  showReleaseModal: function showReleaseModal() {
    this.props.modalActions.showModal({
      modalType: 'RELEASE_NOTES'
    });
  },
  render: function render() {
    var _props = this.props;
    var system = _props.system;
    var autoLaunch = _props.autoLaunch;
    var autoLaunchActions = _props.autoLaunchActions;

    return _react3.default.createElement(
      'div',
      null,
      _react3.default.createElement(
        'div',
        { className: _ProjectSettingsPage2.default.panel },
        _react3.default.createElement(
          'h3',
          null,
          'Cloud Providers'
        ),
        _react3.default.createElement(
          'p',
          null,
          'Set the root folder for Dropbox and Drive.'
        ),
        _react3.default.createElement(
          'div',
          { style: { marginBottom: '10px' } },
          _react3.default.createElement(
            _FileSelectInputElectron2.default,
            {
              title: 'Select Root Dropbox Location',
              model: 'system.providerPath.dropbox',
              value: system.providerPath.dropbox },
            _react3.default.createElement(
              'div',
              { className: 'layout-column layout-align-center-center', style: inputStyles },
              'Dropbox'
            )
          )
        ),
        _react3.default.createElement(
          'div',
          { style: { marginBottom: '10px' } },
          _react3.default.createElement(
            _FileSelectInputElectron2.default,
            {
              title: 'Select Root Drive Location',
              model: 'system.providerPath.drive',
              value: system.providerPath.drive },
            _react3.default.createElement(
              'div',
              { className: 'layout-column layout-align-center-center', style: inputStyles },
              'Drive'
            )
          )
        )
      ),
      _react3.default.createElement(
        'div',
        { className: _ProjectSettingsPage2.default.panel },
        _react3.default.createElement(
          'h3',
          null,
          'Other options'
        ),
        _react3.default.createElement(
          'div',
          { className: 'layout-row layout-align-start-center' },
          _react3.default.createElement(
            'p',
            { className: 'flex', style: { margin: '10px 10px 10px 0' } },
            'Start Stemn Desktop on system startup'
          ),
          _react3.default.createElement(_Toggle2.default, { changeAction: autoLaunchActions.toggle, value: autoLaunch.status })
        ),
        _react3.default.createElement(
          'div',
          { className: 'layout-row layout-align-start-center' },
          _react3.default.createElement(
            'p',
            { className: 'flex', style: { margin: '10px 10px 10px 0' } },
            'Help improve Stemn by sending usage data'
          ),
          _react3.default.createElement(_Toggle2.default, { model: 'system.settings.usageData', value: system.settings.usageData })
        )
      ),
      _react3.default.createElement(
        'div',
        { className: _ProjectSettingsPage2.default.panel },
        _react3.default.createElement(
          'h3',
          null,
          'Application info'
        ),
        _react3.default.createElement(
          'p',
          null,
          'Stemn Desktop is currently in alpha. Please report any bugs and they will be fixed ASAP.'
        ),
        system.currentVersion ? _react3.default.createElement(
          _SimpleTable2.default,
          null,
          _react3.default.createElement(
            'tr',
            null,
            _react3.default.createElement(
              'td',
              null,
              'Stream'
            ),
            _react3.default.createElement(
              'td',
              null,
              'alpha'
            )
          ),
          _react3.default.createElement(
            'tr',
            null,
            _react3.default.createElement(
              'td',
              null,
              'Version'
            ),
            _react3.default.createElement(
              'td',
              null,
              system.currentVersion
            )
          ),
          _react3.default.createElement(
            'tr',
            null,
            _react3.default.createElement(
              'td',
              null,
              'Release Notes'
            ),
            _react3.default.createElement(
              'td',
              null,
              _react3.default.createElement(
                'a',
                { className: 'link-primary', onClick: this.showReleaseModal },
                'Click here'
              )
            )
          )
        ) : null
      ),
      _react3.default.createElement(
        'div',
        { className: _ProjectSettingsPage2.default.panel },
        _react3.default.createElement(
          'h3',
          null,
          'Reset application'
        ),
        _react3.default.createElement(
          'p',
          null,
          'If something goes wrong, please clear all cached data, this will reset the application back to factory settings.'
        ),
        _react3.default.createElement(
          'div',
          { className: 'layout-row layout-align-end' },
          _react3.default.createElement(
            _ProgressButton2.default,
            { className: 'warn', onClick: this.confirmReset },
            'Clear data'
          )
        )
      )
    );
  }
}));

///////////////////////////////// CONTAINER /////////////////////////////////

function mapStateToProps(_ref, _ref2) {
  var users = _ref.users;
  var system = _ref.system;
  var autoLaunch = _ref.autoLaunch;
  var params = _ref2.params;

  return {
    system: system,
    autoLaunch: autoLaunch
  };
}

function mapDispatchToProps(dispatch) {
  return {
    systemActions: (0, _redux.bindActionCreators)(SystemActions, dispatch),
    stateActions: (0, _redux.bindActionCreators)(StateActions, dispatch),
    modalActions: (0, _redux.bindActionCreators)(ModalActions, dispatch),
    autoLaunchActions: (0, _redux.bindActionCreators)(AutoLaunchActions, dispatch)
  };
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Component);