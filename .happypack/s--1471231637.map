{"version":3,"sources":["app\\renderer\\main\\modules\\Modal\\Modal.jsx"],"names":[],"mappings":"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","file":"Modal.jsx","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["// Container Core\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport i from 'icepick';\n\n// Container Actions\nimport * as ModalActions from './Modal.actions.js';\n\nimport { getFunction } from 'app/shared/modules/FunctionLibrary/FunctionLibrary.js'\n\n// Component Core\nimport React from 'react';\nimport Modal from 'react-modal';\n\n// Styles\nimport classNames from 'classnames';\nimport classes from './Modal.css'\n\n// Modals\nimport ConfirmModal         from './modals/ConfirmModal.jsx';\nimport ErrorModal           from './modals/ErrorModal.jsx';\nimport ConnectionModal      from './modals/ConnectionModal.jsx';\nimport GoogleRevokeModal    from './modals/GoogleRevokeModal.jsx'\nimport ReleaseNotesModal    from './modals/ReleaseNotesModal.jsx'\nimport FileSelectModal      from 'app/renderer/main/modules/FileSelect/FileSelectModal.jsx';\nimport TaskDisplayModal     from 'app/renderer/main/modules/Tasks/TaskDisplayModal/TaskDisplayModal.jsx'\nimport TaskLabelsEditModal  from 'app/renderer/main/modules/Tasks/TaskLabelsEditModal/TaskLabelsEditModal.jsx'\nimport TaskMentionModal     from 'app/renderer/main/modules/Mentions/TaskMentionModal/TaskMentionModal.jsx'\nimport ProjectNewModal      from 'app/renderer/main/modules/Projects/ProjectNewModal/ProjectNewModal.jsx'\n\n\nconst modalComponents = {\n  'CONFIRM'       : ConfirmModal,\n  'ERROR'         : ErrorModal,\n  'CONNECTION'    : ConnectionModal,\n  'FILE_SELECT'   : FileSelectModal,\n  'TASK'          : TaskDisplayModal,\n  'TASK_LABELS'   : TaskLabelsEditModal,\n  'TASK_COMMIT'   : TaskMentionModal,\n  'PROJECT_NEW'   : ProjectNewModal,\n  'GOOGLE_REVOKE' : GoogleRevokeModal,\n  'RELEASE_NOTES' : ReleaseNotesModal\n}\n\n/////////////////////////////////////////////////////////////////////////////\n///////////////////////////////// COMPONENT /////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////\n\nconst ModalRoot = (modal) => {\n  if (!modal.modalType) {\n    return null\n  }\n  const SpecificModal = modalComponents[modal.modalType];\n  if(!SpecificModal){\n    console.error(`${modal.modalType} Modal could not be found`);\n    return null\n  }\n  const extendedModalProps = Object.assign({}, modal.modalProps, {\n    modalHide: modal.modalHide,\n    modalCancel: modal.modalCancel,\n    modalConfirm: modal.modalConfirm\n  });\n  return (\n    <SpecificModal {...extendedModalProps} />\n  )\n}\n\nexport const Component = React.createClass({\n  render: function() {\n    const { modal, dispatch } = this.props;\n\n    // This transforms the modalCancel and modalConfirm actions and adds the modalHide action\n    const modalExtended = Object.assign({}, modal, {\n      modalHide: ()    => { this.props.ModalActions.hideModal({modalId: modal.modalId}) },\n      // The cancel and confirm actions can be extended before dispatching\n      modalCancel: (extendObject)  => callbackFunction(modal.modalCancel, dispatch, extendObject),\n      modalConfirm: (extendObject) => callbackFunction(modal.modalConfirm, dispatch, extendObject),\n    })\n\n    return (\n      <Modal\n        isOpen={true}\n        onRequestClose={()=>{\n          modalExtended.modalCancel()\n          modalExtended.modalHide()\n        }}\n        className={classes.modal}\n        overlayClassName={classes.overlay+ ' layout-column layout-align-center-center'}>\n        { ModalRoot(modalExtended) }\n      </Modal>\n    );\n  }\n});\n\nfunction callbackFunction(callbackObject, dispatch, extendObject){\n  // If we have a function alias:\n  if(callbackObject && callbackObject.functionAlias) {\n    const functionFromAlias = getFunction(callbackObject.functionAlias);\n    if(functionFromAlias){\n\n      // If it is an array, pass in the array of params\n      if(Array.isArray(callbackObject.functionInputs)){\n        dispatch(functionFromAlias(...callbackObject.functionInputs));\n      }\n      // If the inputs are an object, extend them\n      else{\n        dispatch(functionFromAlias(i.merge(callbackObject.functionInputs, extendObject)));\n      }\n    }\n  }\n  // Else, if it is a normal object, dispatch it\n  else if(callbackObject){\n    dispatch(i.merge(callbackObject, extendObject))\n  }\n}\n\n/////////////////////////////////////////////////////////////////////////////\n///////////////////////////////// CONTAINER /////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////\n\nfunction mapStateToProps() {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    ModalActions: bindActionCreators(ModalActions, dispatch),\n    dispatch\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Component);\n"]}