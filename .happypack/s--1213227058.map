{"version":3,"sources":["app\\shared\\actions\\auth.js"],"names":[],"mappings":"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","file":"auth.js","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["import http from 'axios';\nimport * as auth from '../../main/modules/auth/auth.js';\nimport * as ProjectsActions from './projects.js';\n\nexport function loadUserData() {\n  return (dispatch) => {\n    dispatch({\n      type:'AUTH/LOAD_USER_DATA',\n      payload: http({\n        url: `/api/v1/me`,\n        method: 'GET',\n      }).then((response)=>{\n        dispatch(ProjectsActions.getUserProjects({userId: response.data._id}))\n        return response\n      }),\n    })\n  }\n}\n\nexport function authenticate(provider) {\n  return (dispatch) => {\n    return dispatch({\n      type:'AUTH/AUTHENTICATE',\n      payload: auth.authenticate({\n        provider\n      }).then((response)=>{\n        dispatch(setAuthToken(response.data.token))\n        dispatch(initHttpHeaders('bearer ' + response.data.token))\n        setTimeout(()=>dispatch(loadUserData()), 1)\n        return response\n      })\n    })\n  }\n}\n\nexport function unlink(provider) {\n  return {\n    type:'AUTH/UNLINK',\n    payload: http({\n      url: `/api/v1/auth/unlink/${provider}`,\n      method: 'POST',\n    })\n  }\n}\n\nexport function login({email, password}) {\n  return (dispatch) => {\n    dispatch({\n      type:'AUTH/LOGIN',\n      payload: http({\n        url: '/api/v1/auth/login',\n        method: 'POST',\n        data: {\n          email,\n          password\n        }\n      }).then((response)=>{\n        dispatch(setAuthToken(response.data.token))\n        dispatch(initHttpHeaders('bearer ' + response.data.token))\n        setTimeout(()=>dispatch(loadUserData()), 1)\n        return response\n      })\n    })\n  }\n}\n\nexport function register({email, password, firstname, lastname}) {\n  return (dispatch) => {\n    dispatch({\n      type:'AUTH/REGISTER',\n      payload: http({\n        url: `/api/v1/auth/register`,\n        method: 'POST',\n        data: {\n          email,\n          password,\n          firstname,\n          lastname\n        }\n      }).then((response)=>{\n        dispatch(setAuthToken(response.data.token))\n        dispatch(initHttpHeaders('bearer ' + response.data.token))\n        setTimeout(()=>dispatch(loadUserData()), 1)\n        return response\n      })\n    })\n  }\n}\n\nexport function setAuthToken(token) {\n  return {\n      type:'AUTH/SET_AUTH_TOKEN',\n      payload: token\n  }\n}\n\nexport function removeAuthToken() {\n  return {\n      type:'AUTH/REMOVE_AUTH_TOKEN',\n  }\n}\n\nexport function initHttpHeaders(fullToken) {\n\n  return {\n    type:'AUTH/INIT_HTTP_HEADER',\n    payload: {fullToken : fullToken}\n  }\n}\n\nexport function removeHttpHeaders() {\n  return {\n      type:'AUTH/REMOVE_HTTP_HEADER',\n  }\n}\n\nexport function clearUserData() {\n  return {\n      type:'AUTH/CLEAR_USER_DATA',\n  }\n}\n\nexport function logout() {\n  return (dispatch) => {\n    dispatch(clearUserData());\n    dispatch(removeHttpHeaders());\n    dispatch(removeAuthToken());\n    dispatch({\n        type:'AUTH/LOGOUT',\n    })\n  }\n}\n"]}