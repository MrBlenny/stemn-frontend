'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _reactAutosuggest = require('react-autosuggest');

var _reactAutosuggest2 = _interopRequireDefault(_reactAutosuggest);

var _autosuggestHighlight = require('autosuggest-highlight');

var _autosuggestHighlight2 = _interopRequireDefault(_autosuggestHighlight);

var _UserAvatar = require('app/renderer/main/components/Avatar/UserAvatar/UserAvatar.jsx');

var _UserAvatar2 = _interopRequireDefault(_UserAvatar);

require('app/renderer/assets/css/autosuggest.css');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _components = {
  _component: {}
};

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/renderer/main/modules/UserSearch/UserSearch.jsx',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/renderer/main/modules/UserSearch/UserSearch.jsx',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2(_CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
}

exports.default = _wrapComponent('_component')(_react3.default.createClass({
  onChange: function onChange(event, _ref) {
    var newValue = _ref.newValue;

    this.props.UserSearchActions.updateInputValue(newValue);
    var value = newValue.trim();
    if (value === '') {
      this.props.UserSearchActions.clearSuggestions();
    }
  },
  onSuggestionsUpdateRequested: function onSuggestionsUpdateRequested(_ref2) {
    var value = _ref2.value;

    if (value.length > 0) {
      this.props.UserSearchActions.loadSuggestions(value);
    }
  },
  getSuggestionValue: function getSuggestionValue(suggestion) {
    return suggestion.name;
  },
  renderSuggestion: function renderSuggestion(suggestion, _ref3) {
    var query = _ref3.query;

    var suggestionText = suggestion.name;
    var matches = _autosuggestHighlight2.default.match(suggestionText, query);
    var parts = _autosuggestHighlight2.default.parse(suggestionText, matches);

    return _react3.default.createElement(
      'div',
      { className: 'layout-row layout-align-start-center' },
      _react3.default.createElement(_UserAvatar2.default, { picture: suggestion.picture }),
      _react3.default.createElement(
        'div',
        { style: { marginLeft: '10px' }, className: 'flex' },
        parts.map(function (part, index) {
          var className = part.highlight ? 'bold' : null;
          return _react3.default.createElement(
            'span',
            { className: className, key: index },
            part.text
          );
        })
      )
    );
  },
  onSuggestionSelected: function onSuggestionSelected(event, _ref4) {
    var suggestion = _ref4.suggestion;
    var suggestionValue = _ref4.suggestionValue;
    var sectionIndex = _ref4.sectionIndex;
    var method = _ref4.method;

    if (this.props.select) {
      this.props.UserSearchActions.clearSuggestions();
      this.props.UserSearchActions.updateInputValue('');
      this.props.select(suggestion);
    }
  },
  render: function render() {
    var inputProps = {
      placeholder: "Invite a user.",
      value: this.props.userSearch.value,
      onChange: this.onChange
    };

    return _react3.default.createElement(
      'div',
      { className: 'app-container' },
      _react3.default.createElement(_reactAutosuggest2.default, {
        suggestions: this.props.userSearch.suggestions,
        onSuggestionsUpdateRequested: this.onSuggestionsUpdateRequested,
        getSuggestionValue: this.getSuggestionValue,
        onSuggestionSelected: this.onSuggestionSelected,
        renderSuggestion: this.renderSuggestion,
        inputProps: inputProps })
    );
  }
}));
module.exports = exports['default'];