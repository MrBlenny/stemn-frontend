{"version":3,"sources":["app\\renderer\\main\\modules\\Comments\\Comments.reducer.js"],"names":[],"mappings":";;;;;;kBAsEe,YAAwC;AAAA,MAA9B,KAA8B,yDAAtB,YAAsB;AAAA,MAAR,MAAQ;;AACrD,SAAO,6BAAQ,WAAR,EAAqB,UAArB,EAAiC,KAAjC,EAAwC,MAAxC,CAAP;AACD,C;;AAxED;;AACA;;;;;;AAEA,IAAM,eAAe;AACnB,QAAM,EADa;AAEnB,SAAO;AAFY,CAArB;;AAKA,IAAM,cAAc,SAAd,WAAc,CAAC,KAAD,EAAQ,MAAR,EAAmB;AACrC,UAAQ,OAAO,IAAf;AACE,SAAK,8BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,SAAhC,CAAjB,EAA6D,IAA7D,CAAP;AACF,SAAK,+BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,SAAhC,CAAjB,EAA6D,KAA7D,CAAP;AACF,SAAK,gCAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,CAAjB,EAAkD;AACvD,iBAAS,KAD8C;AAEvD,cAAM,OAAO,OAAP,CAAe;AAFkC,OAAlD,CAAP;;AAMF,SAAK,qBAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,OAAP,CAAe,SAAxB,EAAmC,YAAnC,CAAjB,EAAmE,IAAnE,CAAP;AACF,SAAK,sBAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,OAAP,CAAe,SAAxB,EAAmC,YAAnC,CAAjB,EAAmE,KAAnE,CAAP;;AAGF,SAAK,8BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,OAAD,EAAU,OAAO,IAAP,CAAY,MAAtB,EAA8B,YAA9B,EAA4C,aAA5C,CAAjB,EAA6E,IAA7E,CAAP;AACF,SAAK,+BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,OAAD,EAAU,OAAO,IAAP,CAAY,MAAtB,EAA8B,YAA9B,EAA4C,aAA5C,CAAjB,EAA6E,KAA7E,CAAP;AACF,SAAK,gCAAL;AACE,aAAO,kBAAE,KAAF,CAAQ,KAAR,EACJ,OADI,CACI,CAAC,OAAD,EAAU,OAAO,IAAP,CAAY,MAAtB,EAA8B,YAA9B,CADJ,EACiD,EADjD,EACqD;AADrD,OAEJ,OAFI,CAEI,CAAC,MAAD,EAAS,OAAO,OAAP,CAAe,IAAf,CAAoB,GAA7B,EAAkC,MAAlC,CAFJ,EAE+C,OAAO,OAAP,CAAe,IAF9D,EAEoE;AAFpE,OAGJ,KAHI,EAAP;;AAKF,SAAK,yBAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,eAAhC,CAAjB,EAAmE,IAAnE,CAAP;AACF,SAAK,0BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,eAAhC,CAAjB,EAAmE,KAAnE,CAAP;AACF,SAAK,2BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,CAAjB,EAAkD,SAAlD,CAAP;;AAEF,SAAK,yBAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,aAAhC,CAAjB,EAAiE,IAAjE,CAAP;AACF,SAAK,0BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,aAAhC,CAAjB,EAAiE,KAAjE,CAAP;AACF,SAAK,2BAAL;AACE,aAAO,kBAAE,OAAF,CAAU,KAAV,EAAiB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,CAAjB,EAAkD;AACvD,cAAM,OAAO,OAAP,CAAe,IADkC;AAEvD,qBAAa;AAF0C,OAAlD,CAAP;;AAKF,SAAK,iCAAL;AACE,aAAO,kBAAE,QAAF,CAAW,KAAX,EAAkB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,MAAhC,EAAwC,WAAxC,CAAlB,EAAwE;AAAA,eAAa,kBAAE,IAAF,CAAO,SAAP,EAAkB,OAAO,OAAP,CAAe,IAAjC,CAAb;AAAA,OAAxE,CAAP;AACF,SAAK,oCAAL;AACE,aAAO,kBAAE,QAAF,CAAW,KAAX,EAAkB,CAAC,MAAD,EAAS,OAAO,IAAP,CAAY,SAArB,EAAgC,MAAhC,EAAwC,WAAxC,CAAlB,EAAwE,qBAAa;AAC1F,YAAM,QAAQ,UAAU,SAAV,CAAoB;AAAA,iBAAY,SAAS,IAAT,IAAiB,OAAO,IAAP,CAAY,YAA7B,IAA6C,SAAS,KAAT,CAAe,GAAf,IAAsB,OAAO,IAAP,CAAY,MAA3F;AAAA,SAApB,CAAd;AACA,eAAO,SAAS,CAAC,CAAV,GAAc,SAAd,GAA0B,kBAAE,MAAF,CAAS,SAAT,EAAoB,KAApB,EAA2B,CAA3B,CAAjC;AACD,OAHM,CAAP;;AAQF;AACE,aAAO,KAAP;AAzDJ;AA2DD,CA5DD","file":"Comments.reducer.js","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["import { modeled } from 'react-redux-form';\nimport i from 'icepick';\n\nconst initialState = {\n  data: {},\n  tasks: {}\n}\n\nconst mainReducer = (state, action) => {\n  switch (action.type) {\n    case 'COMMENTS/GET_COMMENT_PENDING':\n      return i.assocIn(state, ['data', action.meta.commentId, 'loading'], true)\n    case 'COMMENTS/GET_COMMENT_REJECTED':\n      return i.assocIn(state, ['data', action.meta.commentId, 'loading'], false)\n    case 'COMMENTS/GET_COMMENT_FULFILLED':\n      return i.assocIn(state, ['data', action.meta.commentId], {\n        loading: false,\n        data: action.payload.data\n      })\n\n\n    case 'COMMENTS/START_EDIT':\n      return i.assocIn(state, ['data', action.payload.commentId, 'editActive'], true)\n    case 'COMMENTS/FINISH_EDIT':\n      return i.assocIn(state, ['data', action.payload.commentId, 'editActive'], false)\n\n\n    case 'COMMENTS/NEW_COMMENT_PENDING':\n      return i.assocIn(state, ['tasks', action.meta.taskId, 'newComment', 'savePending'], true)\n    case 'COMMENTS/NEW_COMMENT_REJECTED':\n      return i.assocIn(state, ['tasks', action.meta.taskId, 'newComment', 'savePending'], false)\n    case 'COMMENTS/NEW_COMMENT_FULFILLED':\n      return i.chain(state)\n        .assocIn(['tasks', action.meta.taskId, 'newComment'], {}) // Reset the newComment objected\n        .assocIn(['data', action.payload.data._id, 'data'], action.payload.data) // Put the comment in the store\n        .value();\n\n    case 'COMMENTS/DELETE_PENDING':\n      return i.assocIn(state, ['data', action.meta.commentId, 'deletePending'], true)\n    case 'COMMENTS/DELETE_REJECTED':\n      return i.assocIn(state, ['data', action.meta.commentId, 'deletePending'], false)\n    case 'COMMENTS/DELETE_FULFILLED':\n      return i.assocIn(state, ['data', action.meta.commentId], undefined)\n\n    case 'COMMENTS/UPDATE_PENDING':\n      return i.assocIn(state, ['data', action.meta.commentId, 'savePending'], true)\n    case 'COMMENTS/UPDATE_REJECTED':\n      return i.assocIn(state, ['data', action.meta.commentId, 'savePending'], false)\n    case 'COMMENTS/UPDATE_FULFILLED':\n      return i.assocIn(state, ['data', action.meta.commentId], {\n        data: action.payload.data,\n        savePending: false\n      })\n\n    case 'COMMENTS/NEW_REACTION_FULFILLED':\n      return i.updateIn(state, ['data', action.meta.commentId, 'data', 'reactions'], reactions => i.push(reactions, action.payload.data))\n    case 'COMMENTS/DELETE_REACTION_FULFILLED':\n      return i.updateIn(state, ['data', action.meta.commentId, 'data', 'reactions'], reactions => {\n        const index = reactions.findIndex(reaction => reaction.type == action.meta.reactionType && reaction.owner._id == action.meta.userId);\n        return index == -1 ? reactions : i.splice(reactions, index, 1);\n      })\n\n\n\n\n    default:\n      return state;\n  }\n}\n\nexport default function (state = initialState, action) {\n  return modeled(mainReducer, 'comments')(state, action)\n}\n"]}