'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Component = undefined;

var _index = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _redux = require('redux');

var _reactRedux = require('react-redux');

require('javascript-detect-element-resize');

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _FileCompareInner = require('./FileCompareInner.css');

var _FileCompareInner2 = _interopRequireDefault(_FileCompareInner);

var _PreviewFile = require('app/renderer/main/modules/Files/PreviewFile/PreviewFile.jsx');

var _PreviewFile2 = _interopRequireDefault(_PreviewFile);

var _FileCompareSlider = require('./FileCompareSlider/FileCompareSlider.jsx');

var _FileCompareSlider2 = _interopRequireDefault(_FileCompareSlider);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _components = {
  _component: {}
};

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/renderer/main/modules/FileCompare/FileCompareInner/FileCompareInner.jsx',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/renderer/main/modules/FileCompare/FileCompareInner/FileCompareInner.jsx',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2(_CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
} // Container Core


// Container Actions

// Component Core


// Functions
// addResizeListener && removeResizeListener
// Styles


// Sub Components


///////////////////////////////// COMPONENT /////////////////////////////////

var Component = exports.Component = _wrapComponent('_component')(_react3.default.createClass({
  displayName: 'Component',
  getInitialState: function getInitialState() {
    return {
      position: 50,
      width: 0
    };
  },

  updateDimensions: function updateDimensions() {
    if (this.refs.container) {
      this.setState({ width: this.refs.container.offsetWidth });
    }
  },
  componentWillMount: function componentWillMount() {
    this.updateDimensions();
  },
  componentDidMount: function componentDidMount() {
    window.addResizeListener(this.refs.container, this.updateDimensions);
  },
  componentWillUnmount: function componentWillUnmount() {
    window.removeResizeListener(this.refs.container, this.updateDimensions);
  },
  sliderChange: function sliderChange(position) {
    this.setState({ position: position });
  },
  changeFn: function changeFn(event) {
    this.setState({ position: event.target.value });
  },
  render: function render() {
    var _props = this.props;
    var project = _props.project;
    var file1 = _props.file1;
    var file2 = _props.file2;
    var compareId = _props.compareId;
    var mode = _props.mode;
    var width = this.state.width;


    var compareModeClasses = {
      sideBySide: 'layout-row',
      aboveAndBelow: 'layout-column',
      onion: 'layout-row',
      slider: 'layout-row',
      single: 'layout-row'
    };

    var preview2Style = {
      sideBySide: {},
      aboveAndBelow: {},
      onion: {
        opacity: this.state.position / 100
      },
      slider: {
        width: this.state.position + '%'
      },
      single: {}
    };
    var overylayStyles = mode == 'slider' && this.refs.container ? { width: width + 'px' } : {};

    var filePreview1 = function filePreview1() {
      return _react3.default.createElement(
        'div',
        { className: _FileCompareInner2.default.preview1 + ' flex layout-column' },
        file2 ? _react3.default.createElement(_PreviewFile2.default, { project: project, file: file2 }) : ''
      );
    };

    var filePreview2 = function filePreview2() {
      if (file1) {
        return _react3.default.createElement(
          'div',
          { className: _FileCompareInner2.default.preview2 + ' flex layout-column', style: preview2Style[mode] },
          _react3.default.createElement(
            'div',
            { className: 'layout-column flex', style: overylayStyles },
            file1 ? _react3.default.createElement(_PreviewFile2.default, { project: project, file: file1 }) : ''
          )
        );
      }
    };

    return _react3.default.createElement(
      'div',
      { className: 'layout-column flex' },
      _react3.default.createElement(
        'div',
        { className: (0, _classnames2.default)('flex', 'rel-box', 'scroll-box', compareModeClasses[mode], _FileCompareInner2.default[mode]), ref: 'container' },
        filePreview1(),
        mode == 'slider' ? _react3.default.createElement(_FileCompareSlider2.default, { container: this.refs.container, changeFn: this.sliderChange, position: this.state.position }) : '',
        filePreview2()
      ),
      mode == 'onion' ? _react3.default.createElement(
        'div',
        { className: _FileCompareInner2.default.rangeSlider + ' layout-row' },
        _react3.default.createElement('input', { className: 'flex', type: 'range', min: '0', max: '100', step: '0.1', style: { cursor: 'move' }, onChange: this.changeFn })
      ) : ''
    );
  }
}));

/////////////////////////////////////////////////////////////////////////////
///////////////////////////////// CONTAINER /////////////////////////////////
/////////////////////////////////////////////////////////////////////////////

function mapStateToProps() {
  return {};
}

function mapDispatchToProps(dispatch) {
  return {};
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Component);