{"version":3,"sources":["app\\renderer\\main\\modules\\Sidebar\\Sidebar.jsx"],"names":[],"mappings":"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","file":"Sidebar.jsx","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["// Container Core\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\n// Container Actions\nimport * as SidebarActions from 'app/shared/actions/sidebar';\nimport * as AuthActions from 'app/shared/actions/auth';\nimport * as ProjectsActions from 'app/shared/actions/projects';\nimport * as ModalActions from 'app/renderer/main/modules/Modal/Modal.actions.js';\nimport * as SystemActions from 'app/shared/actions/system';\nimport { push } from 'react-router-redux'\n\n// Component Core\nimport React from 'react';\n\n// Styles\nimport classNames from 'classnames';\nimport styles from './Sidebar.css';\nimport userStyles from './SidebarAvatar.css';\n\n// Sub Components\nimport DragResize      from 'app/renderer/main/modules/DragResize/DragResize.jsx';\nimport { Link } from 'react-router';\nimport { ContextMenuLayer } from \"react-contextmenu\";\nimport PopoverMenu from 'app/renderer/main/components/PopoverMenu/PopoverMenu';\nimport Input from 'app/renderer/main/components/Input/Input/Input'\nimport ContextMenu from 'app/renderer/main/modules/ContextMenu/ContextMenu.jsx';\nimport SidebarProjectButton from './SidebarProjectButton.jsx';\nimport SimpleIconButton from 'app/renderer/main/components/Buttons/SimpleIconButton/SimpleIconButton';\nimport MdMenu from 'react-icons/md/menu';\nimport MdSearch from 'react-icons/md/search';\nimport MdSettings from 'react-icons/md/settings';\nimport MdAdd from 'react-icons/md/add';\n\nimport UserAvatar          from 'app/renderer/main/components/Avatar/UserAvatar/UserAvatar.jsx';\n\n///////////////////////////////// COMPONENT /////////////////////////////////\nconst projectContextIdentifier = 'ProjectContextIdentifier';\nconst ProjectWithContext = ContextMenuLayer(projectContextIdentifier, (props) => props.item)(SidebarProjectButton);\n\nexport const Component = React.createClass({\n\n  componentWillReceiveProps(nextProps) {\n    if(nextProps.auth.user._id && !nextProps.projects.userProjects.loading && !nextProps.projects.userProjects.data){\n      nextProps.projectsActions.getUserProjects({\n        userId: nextProps.auth.user._id,\n      });\n    }\n  },\n\n  showProjectNewModal(){\n    this.props.modalActions.showModal({modalType: 'PROJECT_NEW',})\n  },\n\n  render() {\n    const { projectsActions, projects, dispatch } = this.props;\n    const sidebarStyle = classNames('layout-column', 'flex' ,'rel-box', styles.sidebar);\n\n    const nameRegex = new RegExp(this.props.sidebar.searchString, 'i');\n    const filteredProjects = projects.userProjects.data ? projects.userProjects.data.filter(project => nameRegex.test(project.name)) : [];\n\n    const projectContextMenu = [{\n      label: 'Open Folder',\n      isHidden: item => !item.remote || !item.remote.connected,\n      onClick: item => {\n        this.props.systemActions.openFile({\n          projectId: item._id,\n          provider: item.remote.provider,\n          path: ''\n        })},\n    },{\n      label: 'Project Settings',\n      subMenu: [{\n        label: 'General Settings',\n        onClick: item => dispatch(push(`/project/${item._id}/settings`))\n      },{\n        label: 'Task Settings',\n        onClick: item => dispatch(push(`/project/${item._id}/settings/tasks`))\n      },{\n        label: 'Team Settings',\n        onClick: item => dispatch(push(`/project/${item._id}/settings/team`))\n      }]\n    },{\n      label: 'Delete Project',\n      divider: true,\n      onClick: item => projectsActions.confirmDeleteProject({\n        projectId: item._id\n      }),\n    }];\n\n    return (\n      <DragResize side=\"right\" width=\"300\" widthRange={[0, 500]} animateHide={!this.props.sidebar.show} className=\"layout-column flex\">\n        <div className={sidebarStyle}>\n          <div className={styles.sidebarToolbar + ' layout-row layout-align-start-center'}>\n            <PopoverMenu preferPlace=\"below\">\n              <div>\n                <SimpleIconButton style={{padding: '0px', color: 'black'}} title=\"Create new project\">\n                  <MdAdd size=\"25\"/>\n                </SimpleIconButton>\n              </div>\n              <div className=\"PopoverMenu\">\n                <a onClick={this.showProjectNewModal}>Create New Project</a>\n              </div>\n            </PopoverMenu>\n\n            <div className=\"flex\"></div>\n            <SimpleIconButton title=\"Toggle sidebar\" style={{padding: '0px', color: 'black'}} onClick={()=>{this.props.sidebarActions.toggleSidebar();}}>\n              <MdMenu size=\"25\"/>\n            </SimpleIconButton>\n\n          </div>\n          <div className={styles.sidebarSearch}>\n            <Input model=\"sidebar.searchString\" value={this.props.sidebar.searchString} className=\"dr-input text-ellipsis\" type=\"text\" placeholder=\"Search all projects\"/>\n            <MdSearch className={styles.sidebarSearchIcon} size=\"25\"/>\n          </div>\n\n          <div className=\"scroll-box flex\">\n            {filteredProjects.map((item, idx) => <ProjectWithContext key={idx} item={item} isActive={item._id == this.props.params.stub} to={`/project/${item._id}`}/>)}\n            <ContextMenu identifier={projectContextIdentifier} menu={projectContextMenu}/>\n          </div>\n\n          <div>\n            <div className=\"layout-row layout-align-start-center\">\n              <PopoverMenu>\n                <a className=\"flex\">\n                  <div className={userStyles.userWrapper + ' flex layout-row layout-align-start-center'}>\n                    <UserAvatar picture={this.props.auth.user.picture} className={userStyles.userAvatar}/>\n                    <div className=\"flex text-ellipsis\">\n                      {this.props.auth.user.name}\n                    </div>\n                  </div>\n                </a>\n                <div className=\"PopoverMenu\">\n                  <a href=\"#/settings/application\">Application Settings</a>\n                  <a href=\"#/settings/account\">Account Settings</a>\n                  <a onClick={()=>{this.props.authActions.logout()}}>Sign out</a>\n                </div>\n              </PopoverMenu>\n              <Link className={userStyles.userSettings + ' layout-column layout-align-center-center'} to=\"/settings/application\"><MdSettings size=\"25\"/></Link>\n            </div>\n          </div>\n        </div>\n      </DragResize>\n\n    );\n  }\n});\n\n\n///////////////////////////////// CONTAINER /////////////////////////////////\n\nfunction mapStateToProps({ sidebar, auth, projects }, {params}) {\n  return {\n    sidebar,\n    auth,\n    params,\n    projects,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    authActions: bindActionCreators(AuthActions, dispatch),\n    sidebarActions: bindActionCreators(SidebarActions, dispatch),\n    projectsActions: bindActionCreators(ProjectsActions, dispatch),\n    modalActions: bindActionCreators(ModalActions, dispatch),\n    systemActions: bindActionCreators(SystemActions, dispatch),\n    dispatch\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Component);\n"]}