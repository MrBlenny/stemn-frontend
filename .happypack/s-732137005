'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getUuid = require('app/shared/helpers/getUuid.js');

var _getUuid2 = _interopRequireDefault(_getUuid);

var _lodash = require('lodash');

var _webGerber = require('app/renderer/assets/other/gerber/js/webGerber.js');

var _webGerber2 = _interopRequireDefault(_webGerber);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var previewPcbService = {
  activeInstances: [],
  register: register,
  deregister: deregister
};

exports.default = previewPcbService;

////////////////////////////////////////////

function register() {
  var id = (0, _getUuid2.default)();
  var instance = (0, _webGerber2.default)();
  instance.id = id;
  previewPcbService.activeInstances.push(instance);
  return instance;
}

function deregister(instance) {
  if (instance) {
    instance.destroy();
    previewPcbService.activeInstances.splice((0, _lodash.findIndex)(previewPcbService.activeInstances, 'id', instance.id), 1);
  }
}
module.exports = exports['default'];