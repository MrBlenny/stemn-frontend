{"version":3,"sources":["app\\renderer\\main\\pages\\ProjectPage\\ProjectSettingsPage\\ProjectSettingsGeneralPage\\ProjectSettingsGeneralPage.jsx"],"names":[],"mappings":"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","file":"ProjectSettingsGeneralPage.jsx","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["// Container Core\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\n// Container Actions\nimport * as ProjectsActions from 'app/shared/actions/projects.js';\nimport * as ModalActions from 'app/renderer/main/modules/Modal/Modal.actions.js';\n\n// Component Core\nimport React from 'react';\nimport { has } from 'lodash';\n// Styles\nimport classNames from 'classnames';\nimport classes from '../ProjectSettingsPage.css'\n\n// Sub Components\nimport { Field, actions } from 'react-redux-form';\n\nimport Tabs from 'app/renderer/main/components/Tabs/Tabs'\nimport Toggle from 'app/renderer/main/components/Input/Toggle/Toggle'\nimport UserSearch from 'app/renderer/main/modules/UserSearch/UserSearch.container.js'\nimport TeamMember from 'app/renderer/main/components/Project/TeamMember/TeamMember.jsx'\nimport ProjectPermissionsRadio from 'app/renderer/main/components/Project/ProjectPermissionsRadio/ProjectPermissionsRadio.jsx'\nimport ProjectLinkRemote from 'app/renderer/main/components/Project/ProjectLinkRemote/ProjectLinkRemote.jsx'\nimport FileSelectInput from 'app/renderer/main/modules/FileSelectInput/FileSelectInput.jsx'\nimport ProgressButton from 'app/renderer/main/components/Buttons/ProgressButton/ProgressButton'\nimport TaskLabelsEdit from 'app/renderer/main/modules/Tasks/TaskLabelsEdit/TaskLabelsEdit.jsx'\nimport NavPill from 'app/renderer/main/components/Buttons/NavPill/NavPill'\n\n/////////////////////////////////////////////////////////////////////////////\n///////////////////////////////// COMPONENT /////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////\n\nconst onMount = (nextProps, prevProps) => {\n  if(nextProps.project && nextProps.project.data){\n    if(!prevProps || nextProps.project.data._id !== prevProps.project.data._id){\n      // Init the filestore form model\n      nextProps.dispatch(actions.load(`${nextProps.entityModel}.formModels.fileStore.remote`, nextProps.project.data.remote))\n    }\n  }\n}\n\nexport const Component = React.createClass({\n\n  // Mounting\n  componentWillMount() { onMount(this.props) },\n  componentWillReceiveProps(nextProps) { onMount(nextProps, this.props)},\n\n  selectFn(selection){\n    if(!this.props.project.data.team.find((item)=>item._id == selection._id)){\n      this.props.ProjectsActions.addTeamMember({\n        projectId: this.props.project.data._id,\n        user: selection\n      })\n    }\n  },\n  changePermissionsFn({role, userId}){\n    this.props.ProjectsActions.changeUserPermissions({\n      role,\n      userId,\n      projectId: this.props.project.data._id,\n    })\n  },\n  removeTeamMemberFn({userId}){\n    this.props.ProjectsActions.removeTeamMember({\n      userId,\n      projectId: this.props.project.data._id,\n    })\n  },\n  linkRemote(){\n    // This is not wrapped in dispach!\n    return ProjectsActions.linkRemote({\n      projectId: this.props.project.data._id,\n      provider: this.props.project.formModels.fileStore.remote.provider,\n      path: this.props.project.formModels.fileStore.remote.root.path,\n      id: this.props.project.formModels.fileStore.remote.root.fileId\n    })\n  },\n  confirmLinkRemote(){\n    // If the store is connected - we confirm the change\n    if(this.props.project.data.remote.connected){\n      this.props.ModalActions.showConfirm({\n        message: 'Changing your file store settings will delete your entire commit and change history. Are you sure you want to do this? Consider creating a new project.',\n        modalConfirm: this.linkRemote()\n      })\n    }\n    // Else change straight away.\n    else{\n      this.props.dispatch(this.linkRemote())\n    }\n  },\n  saveProject(){\n    this.props.ProjectsActions.saveProject({\n      project: this.props.project.data\n    })\n  },\n  render() {\n    const { entityModel, project, ProjectsActions, dispatch } = this.props;\n    return (\n      <div>\n        <div className={classes.panel}>\n         <h3>General Settings</h3>\n         <p>Add your project name and blurb.</p>\n         <Field model={`${entityModel}.data.name`}>\n           <input className=\"dr-input\" type=\"text\" placeholder=\"Project Name\"/>\n         </Field>\n         <br />\n         <Field model={`${entityModel}.data.summary`}>\n           <input className=\"dr-input\" type=\"text\" placeholder=\"Project Summary\"/>\n         </Field>\n         <br />\n         <div className=\"layout-row layout-align-end\">\n           <ProgressButton\n           className=\"primary\"\n           onClick={()=>this.saveProject()}\n           loading={project.savePending}\n           >Update Project</ProgressButton>\n         </div>\n       </div>\n       <div className={classes.panel}>\n         <h3>File Store Settings</h3>\n         <p>Connect your Dropbox or Drive to sync all files and changes. Only one Google Drive or one Dropbox can be connected to a project.</p>\n         { has(project, 'formModels.fileStore.remote.provider')\n         ? <ProjectLinkRemote model={`${entityModel}.formModels.fileStore.remote.provider`} value={project.formModels.fileStore.remote.provider}/>\n         : null }\n         <br />\n         { has(project, 'formModels.fileStore.remote.provider') && (project.formModels.fileStore.remote.provider == 'dropbox' || project.formModels.fileStore.remote.provider == 'drive')\n         ? <div>\n             <FileSelectInput\n               projectId={project.data._id}\n               provider={project.formModels.fileStore.remote.provider}\n               model={`${entityModel}.formModels.fileStore.remote.root`}\n               value={project.formModels.fileStore.remote.root}\n             />\n           </div>\n         : ''}\n         <br />\n         <div className=\"layout-row layout-align-end\">\n           <ProgressButton\n           className=\"primary\"\n           onClick={()=>this.confirmLinkRemote()}\n           loading={project.linkPending}\n           >Update File Store</ProgressButton>\n         </div>\n       </div>\n\n\n\n       <div className={classes.panel}>\n         <h3>Delete Project</h3>\n         <p>Once you delete a project, there is no going back. Please be certain.</p>\n         <div className=\"layout-row layout-align-end\">\n            <ProgressButton className=\"warn\"\n              onClick={()=>ProjectsActions.confirmDeleteProject({projectId: project.data._id})}>\n              Delete Project\n            </ProgressButton>\n         </div>\n       </div>\n      </div>\n    );\n  }\n});\n\n\n//       <div className={classes.panel}>\n//         <h3>Project Type</h3>\n//         <p>Is this a public or private project? Change your project to public to open-source your work.</p>\n//         <ProjectPermissionsRadio model={`${entityModel}.data.permissions.projectType`} />\n//       </div>\n\n/////////////////////////////////////////////////////////////////////////////\n///////////////////////////////// CONTAINER /////////////////////////////////\n/////////////////////////////////////////////////////////////////////////////\n\nfunction mapStateToProps({projects}, otherProps) {\n  return {\n    project: projects.data[otherProps.params.stub],\n    entityModel: `projects.data.${otherProps.params.stub}`\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch,\n    ProjectsActions : bindActionCreators(ProjectsActions, dispatch),\n    ModalActions    : bindActionCreators(ModalActions, dispatch),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Component);\n"]}