'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _index = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\redbox-react\\lib\\index.js');

var _index2 = _interopRequireDefault(_index);

var _index3 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-catch-errors\\lib\\index.js');

var _index4 = _interopRequireDefault(_index3);

var _react2 = require('react');

var _react3 = _interopRequireDefault(_react2);

var _index5 = require('C:\\Users\\david\\repositories\\stemn-electron-2\\node_modules\\react-transform-hmr\\lib\\index.js');

var _index6 = _interopRequireDefault(_index5);

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _TaskTimelineItem = require('app/renderer/main/modules/Tasks/TaskTimeline/TaskTimelineItem/TaskTimelineItem.css');

var _TaskTimelineItem2 = _interopRequireDefault(_TaskTimelineItem);

var _UserAvatar = require('app/renderer/main/components/Avatar/UserAvatar/UserAvatar.jsx');

var _UserAvatar2 = _interopRequireDefault(_UserAvatar);

var _Comment = require('app/renderer/main/modules/Comments/Comment/Comment.jsx');

var _Comment2 = _interopRequireDefault(_Comment);

var _TaskTimelineWrapper = require('app/renderer/main/modules/Tasks/TaskTimeline/TaskTimelineWrapper/TaskTimelineWrapper.jsx');

var _TaskTimelineWrapper2 = _interopRequireDefault(_TaskTimelineWrapper);

var _reactRouter = require('react-router');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _components = {
  _component: {}
};

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/shared/modules/TimelineVertical/TimelineItem/TimelineItem.jsx',
  components: _components,
  locals: [module],
  imports: [_react3.default]
});

var _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({
  filename: 'C:/Users/david/repositories/stemn-electron-2/app/shared/modules/TimelineVertical/TimelineItem/TimelineItem.jsx',
  components: _components,
  locals: [],
  imports: [_react3.default, _index2.default]
});

function _wrapComponent(id) {
  return function (Component) {
    return _CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformHmrLibIndexJs2(_CUsersDavidRepositoriesStemnElectron2Node_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);
  };
} // Component Core


// Styles


// import TaskTimelinePanel   from '../TaskTimelinePanel/TaskTimelinePanel.jsx'

var eventTextMap = {
  revision: function revision(item) {
    return _react3.default.createElement(
      'span',
      null,
      'modified this file.'
    );
  },
  commit: function commit(item) {
    var linkPath = {
      pathname: '/project/' + item.data.project + '/feed',
      query: { item: item.data._id }
    };
    return _react3.default.createElement(
      'span',
      null,
      'added this file to commit: ',
      _react3.default.createElement(
        _reactRouter.Link,
        { to: linkPath, className: 'link-primary' },
        item.data.summary
      )
    );
  }
};

var getTextEventData = function getTextEventData(item) {
  return eventTextMap[item.event] ? eventTextMap[item.event](item) : _react3.default.createElement(
    'span',
    null,
    'Unknown Event Type'
  );
};

exports.default = _wrapComponent('_component')(_react3.default.createClass({
  render: function render() {
    var item = this.props.item;
    // If it is a comment, we use the comment component to display

    if (item.event == 'comment') {
      return _react3.default.createElement(_Comment2.default, { commentId: item.comment });
    }
    //    if(item.event == 'completed' && item.commits && item.commits[0]){
    //      console.log(item);
    //      const commit = item.commits[0];
    //      return (
    //        <TaskTimelinePanel item={item}>
    //          <h3>{commit.summary}</h3>
    //          <div>{commit.description}</div>
    //        </TaskTimelinePanel>
    //      )
    //    }
    // Else, we add a text event
    else {
        return _react3.default.createElement(
          _TaskTimelineWrapper2.default,
          { style: { marginLeft: '5px' } },
          _react3.default.createElement(
            'div',
            { className: 'layout-row layout-align-start-center flex' },
            _react3.default.createElement(
              'div',
              { className: _TaskTimelineItem2.default.avatar },
              _react3.default.createElement(_UserAvatar2.default, { picture: item.user.picture, size: '25px', shape: 'square' })
            ),
            _react3.default.createElement(
              'div',
              null,
              _react3.default.createElement(
                'b',
                null,
                item.user.name,
                'Â '
              ),
              _react3.default.createElement(
                'span',
                { className: 'text-grey-3', style: { lineHeight: '1.5em' } },
                getTextEventData(item),
                ' - ',
                (0, _moment2.default)(item.timestamp).fromNow()
              )
            )
          )
        );
      }
  }
}));
module.exports = exports['default'];