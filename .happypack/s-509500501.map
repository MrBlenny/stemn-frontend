{"version":3,"sources":["app\\renderer\\assets\\other\\gerber\\js\\render\\viewee-generic.js"],"names":[],"mappings":"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","file":"viewee-generic.js","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["(function (root, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn factory();\n\t\t});\n\t} else if (typeof module === \"object\" && module.exports) {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.ViewEERenderer = factory();\n\t}\n}(this, function () {\n\n\t// ---------------\n\t// --- DRAWING ---\n\t// ---------------\n\n\tfunction ViewEERenderer (board) {\n\t\tvar canvas = board.canvas,\n\t\t\tctx    = canvas.getContext('2d');\n\n\t\tthis.canvas = canvas;\n\t\tthis.board  = board;\n\n\t\tthis.warnings = [];\n\t}\n\n\t/**\n\t * Returns scope of current rendering — layer, element/package\n\t * @param {object} ctx   Rendering context\n\t * @param {object} attrs Attributes attached to the rendering context\n\t */\n\tViewEERenderer.prototype.getScope = function (ctx, attrs) {\n\t\tthrow \"not implemented\";\n\t}\n\n\tViewEERenderer.prototype.drawPlainWires = function(layer, ctx) {\n\t\tif (!layer) { return; }\n\n\t\tvar board = this.board;\n\n\t\tvar layerCtx = this.getScope (ctx, {name: layer.name});\n\n\t\tvar layerWires = board.plainWires[layer.number] || [];\n\n\t\tlayerWires.forEach (function (wire) {\n\t\t\tthis.drawSingleWire (Object.assign (\n\t\t\t\t{}, wire,\n\t\t\t\t{\n\t\t\t\t\tcap: 'round',\n\t\t\t\t\tstrokeStyle: board.layerColor (layer.color),\n\t\t\t\t\twidth: wire.width || board.minLineWidth,\n\t\t\t\t}\n\t\t\t), layerCtx);\n\t\t}, this);\n\t}\n\n\tViewEERenderer.prototype.drawSignalWires = function(layer, ctx) {\n\t\tif (!layer) { return; }\n\t\tvar layerNumber = layer.number;\n\n\t\tvar layerCtx = this.getScope (ctx, {name: layer.name});\n\n\t\tvar board = this.board;\n\n\t\tfor (var signalKey in board.signalItems) {\n\n\t\t\tvar signalCtx = this.getScope (layerCtx, {name: signalKey});\n\n\t\t\tvar highlight = (board.highlightedItem && (board.highlightedItem.type=='signal') && (board.highlightedItem.name==signalKey));\n\t\t\tvar color = highlight ? board.highlightColor(layer.color) : board.layerColor(layer.color);\n\n\t\t\tvar signalLayers = board.signalItems[signalKey],\n\t\t\t\tlayerItems = signalLayers[layer.number];\n\t\t\tif (!layerItems) { continue; }\n\t\t\tvar layerWires = layerItems['wires'] || [];\n\n\t\t\tlayerWires.forEach(function(wire) {\n\t\t\t\t// TODO: join wires\n\t\t\t\t// console.log (wire);\n\t\t\t\tthis.drawSingleWire (Object.assign (\n\t\t\t\t\t{}, wire,\n\t\t\t\t\t{cap: 'round', strokeStyle: color}\n\t\t\t\t), signalCtx);\n\t\t\t}, this)\n\t\t}\n\t}\n\n\tViewEERenderer.prototype.drawSignalVias = function(layersName, ctx, color) {\n\t\tif (!layersName) return;\n\n\t\tvar layerCtx = this.getScope (ctx, {name: 'via'});\n\n\t\tvar board = this.board;\n\n\t\tfor (var signalKey in board.signalItems) {\n\t\t\tvar signalLayers = board.signalItems[signalKey],\n\t\t\t\tlayerItems = signalLayers[layersName];\n\t\t\tif (!layerItems) {continue;}\n\t\t\tvar layerVias = layerItems['vias'] || [];\n\t\t\tlayerVias.forEach (function (via) {\n\n\t\t\t\tthis.drawHole (Object.assign ({}, via, {\n\t\t\t\t\tstrokeStyle: color,\n\t\t\t\t\tdiameter: via.diameter || 1.5 * via.drill, // TODO: bad width\n\t\t\t\t}), layerCtx);\n\n\t\t\t}, this)\n\t\t}\n\t}\n\n\tViewEERenderer.prototype.drawPlainTexts = function (layer, ctx) {\n\n\t\tif (!layer) return;\n\n\t\tvar layerCtx = this.getScope (ctx, {name: layer.name});\n\n\t\tvar board = this.board;\n\n\t\tvar layerTexts = board.plainTexts[layer.number] || [];\n\n\t\tvar color = board.layerColor(layer.color);\n\n\t\tlayerTexts.forEach (function (text) {\n\n\t\t\tvar content = text.content;\n\n\t\t\tvar attrs = {\n\t\t\t\tcolor: color,\n\t\t\t\tcontent: content\n\t\t\t};\n\n\t\t\tthis.drawText (attrs, text, layerCtx);\n\n\t\t}, this)\n\t}\n\n\tViewEERenderer.prototype.drawElements = function(layer, ctx) {\n\t\tif (!layer) return;\n\n\t\tvar layerCtx = this.getScope (ctx, {name: layer.name});\n\n\t\tvar board = this.board;\n\n\t\tfor (var elemKey in board.elements) {\n\t\t\tvar elem = board.elements[elemKey];\n\n\t\t\tvar elemCtx = this.getScope (layerCtx, {name: elemKey});\n\n\t\t\tvar highlight = (board.highlightedItem && (board.highlightedItem.type=='element') && (board.highlightedItem.name==elem.name));\n\t\t\tvar color     = highlight ? board.highlightColor(layer.color) : board.layerColor(layer.color);\n\n\t\t\tvar pkg    = typeof elem.pkg === \"string\" ? board.packagesByName[elem.pkg] : elem.pkg;\n\t\t\tvar rotMat = elem.matrix;\n\t\t\tpkg.smds.forEach(function(smd) {\n\t\t\t\tvar layerNum = smd.layer;\n\t\t\t\tif (elem.mirror) { layerNum = board.mirrorLayer(layerNum); }\n\t\t\t\tif (layer.number != layerNum) { return; }\n\n\t\t\t\tvar smdDX = smd.x2-smd.x1,\n\t\t\t\t\tsmdDY = smd.y2-smd.y1,\n\t\t\t\t\t// smd center\n\t\t\t\t\tsmdX  = smd.x1 + smdDX/2,\n\t\t\t\t\tsmdY  = smd.y1 + smdDY/2,\n\t\t\t\t\tsmdXDir = smdDX/Math.abs(smdDX),\n\t\t\t\t\tsmdYDir = smdDY/Math.abs(smdDY),\n\t\t\t\t\tsmdDx1 = smd.x1,\n\t\t\t\t\tsmdDx2 = smd.x2,\n\t\t\t\t\tsmdDy1 = smd.y1,\n\t\t\t\t\tsmdDy2 = smd.y2;\n\n\t\t\t\tvar borderRadius = Math.min (Math.abs (smdDX), Math.abs (smdDY)) / 2;\n\t\t\t\tif (smd.roundness) {\n\t\t\t\t\tborderRadius *= smd.roundness / 100;\n\t\t\t\t\tsmdDx1 += 1 * smdXDir * borderRadius,\n\t\t\t\t\t\tsmdDx2 -= 1 * smdXDir * borderRadius,\n\t\t\t\t\t\tsmdDy1 += 1 * smdYDir * borderRadius,\n\t\t\t\t\t\tsmdDy2 -= 1 * smdYDir * borderRadius;\n\t\t\t\t\tvar drawSmdCircle = (smd.roundness === 100 && Math.abs (smdDX) === Math.abs (smdDY));\n\t\t\t\t}\n\n\t\t\t\tvar smdRotMat = board.matrixForRot (smd.rot);\n\t\t\t\tvar smdX1 = smdX + smdRotMat[0] * (smdX - smdDx1) + smdRotMat[1] * (smdY - smdDy1),\t//top left\n\t\t\t\t\tsmdY1 = smdY + smdRotMat[2] * (smdX - smdDx1) + smdRotMat[3] * (smdY - smdDy1),\n\t\t\t\t\tsmdX2 = smdX + smdRotMat[0] * (smdX - smdDx2) + smdRotMat[1] * (smdY - smdDy2),\t//top right\n\t\t\t\t\tsmdY2 = smdY + smdRotMat[2] * (smdX - smdDx2) + smdRotMat[3] * (smdY - smdDy2);\n\n\n\t\t\t\t//Note that rotation might be not axis aligned, so we have do transform all corners\n\t\t\t\tvar x1 = elem.x + rotMat[0]*smdX1 + rotMat[1]*smdY1,\t//top left\n\t\t\t\t\ty1 = elem.y + rotMat[2]*smdX1 + rotMat[3]*smdY1,\n\t\t\t\t\tx2 = elem.x + rotMat[0]*smdX2 + rotMat[1]*smdY1,\t//top right\n\t\t\t\t\ty2 = elem.y + rotMat[2]*smdX2 + rotMat[3]*smdY1,\n\t\t\t\t\tx3 = elem.x + rotMat[0]*smdX2 + rotMat[1]*smdY2,\t//bottom right\n\t\t\t\t\ty3 = elem.y + rotMat[2]*smdX2 + rotMat[3]*smdY2,\n\t\t\t\t\tx4 = elem.x + rotMat[0]*smdX1 + rotMat[1]*smdY2,\t//bottom left\n\t\t\t\t\ty4 = elem.y + rotMat[2]*smdX1 + rotMat[3]*smdY2;\n\n\t\t\t\tvar padName = smd.name,\n\t\t\t\t\tsignalName = elem.padSignals[padName],\n\t\t\t\t\thighlightPad = (board.highlightedItem && (board.highlightedItem.type=='signal') && (board.highlightedItem.name==signalName));\n\n\t\t\t\tif (drawSmdCircle) {\n\t\t\t\t\tthis.drawFilledCircle (Object.assign ({}, smd, {\n\t\t\t\t\t\tx: x1 - (x2 - x1) / 2,\n\t\t\t\t\t\ty: y1 - (y2 - y1) / 2,\n\t\t\t\t\t\tradius: borderRadius,\n\t\t\t\t\t\tfillStyle: color,\n\t\t\t\t\t\tstrokeWidth: borderRadius * 2,\n\t\t\t\t\t\tstrokeStyle: smd.roundness ? color : null,\n\t\t\t\t\t}), elemCtx);\n\t\t\t\t} else {\n\t\t\t\t\tvar points = [{x: x1, y: y1}, {x: x2, y: y2}, {x: x3, y: y3}, {x: x4, y: y4}];\n\n\t\t\t\t\tthis.drawFilledPoly (Object.assign ({}, smd, {\n\t\t\t\t\t\tpoints: points,\n\t\t\t\t\t\tfillStyle: color,\n\t\t\t\t\t\tstrokeWidth: borderRadius * 2,\n\t\t\t\t\t\tstrokeStyle: smd.roundness ? color : null,\n\t\t\t\t\t}), elemCtx);\n\t\t\t\t}\n\n\t\t\t}, this)\n\n\t\t\tif (pkg.rects) pkg.rects.forEach(function(rect) {\n\t\t\t\tvar layerNum = rect.layer;\n\t\t\t\tif (elem.mirror) { layerNum = board.mirrorLayer(layerNum); }\n\t\t\t\tif (layer.number != layerNum) { return; }\n\n\t\t\t\t//Note that rotation might be not axis aligned, so we have do transform all corners\n\t\t\t\tvar x1 = elem.x + rotMat[0]*rect.x1 + rotMat[1]*rect.y1,\t//top left\n\t\t\t\t\ty1 = elem.y + rotMat[2]*rect.x1 + rotMat[3]*rect.y1,\n\t\t\t\t\tx2 = elem.x + rotMat[0]*rect.x2 + rotMat[1]*rect.y1,\t//top right\n\t\t\t\t\ty2 = elem.y + rotMat[2]*rect.x2 + rotMat[3]*rect.y1,\n\t\t\t\t\tx3 = elem.x + rotMat[0]*rect.x2 + rotMat[1]*rect.y2,\t//bottom right\n\t\t\t\t\ty3 = elem.y + rotMat[2]*rect.x2 + rotMat[3]*rect.y2,\n\t\t\t\t\tx4 = elem.x + rotMat[0]*rect.x1 + rotMat[1]*rect.y2,\t//bottom left\n\t\t\t\t\ty4 = elem.y + rotMat[2]*rect.x1 + rotMat[3]*rect.y2;\n\n\t\t\t\tvar padName = rect.name,\n\t\t\t\t\tsignalName = elem.padSignals[padName],\n\t\t\t\t\thighlightPad = (board.highlightedItem && (board.highlightedItem.type=='signal') && (board.highlightedItem.name==signalName)),\n\t\t\t\t\tpoints = [{x: x1, y: y1}, {x: x2, y: y2}, {x: x3, y: y3}, {x: x4, y: y4}];\n\n\t\t\t\tthis.drawFilledPoly (Object.assign ({}, rect, {\n\t\t\t\t\tpoints: points,\n\t\t\t\t\tfillStyle: highlightPad ? board.highlightColor(layer.color) : color,\n\t\t\t\t\t// strokeStyle: color,\n\t\t\t\t}), elemCtx);\n\n\t\t\t}, this)\n\n\t\t\tpkg.polys.forEach(function(poly) {\n\t\t\t\tvar layerNum = poly.layer;\n\t\t\t\tif (elem.mirror) { layerNum = board.mirrorLayer(layerNum); }\n\t\t\t\tif (layer.number != layerNum) { return ; }\n\n\t\t\t\tvar points = [];\n\t\t\t\tfor (var vId = 0; vId < poly.vertexes.length; vId ++) {\n\t\t\t\t\tvar vertex = poly.vertexes[vId],\n\t\t\t\t\t\tx1  = elem.x + rotMat[0]*vertex.x  + rotMat[1]*vertex.y,\n\t\t\t\t\t\ty1  = elem.y + rotMat[2]*vertex.x  + rotMat[3]*vertex.y;\n\n\t\t\t\t\tpoints.push ({x: x1, y: y1});\n\t\t\t\t}\n\n\t\t\t\tthis.drawFilledPoly (Object.assign ({}, poly, {\n\t\t\t\t\tpoints: points,\n\t\t\t\t\tfillStyle: color,\n\t\t\t\t}), elemCtx);\n\n\t\t\t}, this)\n\n\t\t\tpkg.wires.forEach(function(wire) {\n\t\t\t\tvar layerNum = wire.layer;\n\t\t\t\tif (elem.mirror) { layerNum = board.mirrorLayer(layerNum); }\n\t\t\t\tif (layer.number != layerNum) { return ; }\n\t\t\t\tvar x  = elem.x + rotMat[0]*wire.x  + rotMat[1]*wire.y,\n\t\t\t\t\ty  = elem.y + rotMat[2]*wire.x  + rotMat[3]*wire.y,\n\t\t\t\t\tx1 = elem.x + rotMat[0]*wire.x1 + rotMat[1]*wire.y1,\n\t\t\t\t\ty1 = elem.y + rotMat[2]*wire.x1 + rotMat[3]*wire.y1,\n\t\t\t\t\tx2 = elem.x + rotMat[0]*wire.x2 + rotMat[1]*wire.y2,\n\t\t\t\t\ty2 = elem.y + rotMat[2]*wire.x2 + rotMat[3]*wire.y2;\n\n\t\t\t\tthis.drawSingleWire ({\n\t\t\t\t\tcap: wire.cap, width: wire.width,\n\t\t\t\t\tcurve: wire.curve, rot: elem.rot,\n\t\t\t\t\tx1: x1, y1: y1, x2: x2, y2: y2,\n\t\t\t\t\tx: x, y: y, radius: wire.radius, angle: wire.angle, start: wire.start,\n\t\t\t\t\tstrokeStyle: color\n\t\t\t\t}, elemCtx);\n\t\t\t}, this)\n\n\t\t\t// TODO: pads can be rotated too\n\t\t\tpkg.pads.forEach(function(pad) {\n\t\t\t\tvar layerNum = pad.layer;\n\t\t\t\t// We don't need to check layers, pads is pass through all layers\n\t\t\t\tvar x = elem.x + rotMat[0]*pad.x + rotMat[1]*pad.y,\n\t\t\t\t\ty = elem.y + rotMat[2]*pad.x + rotMat[3]*pad.y;\n\n\t\t\t\tvar lineWidth = (pad.diameter - pad.drill) / 2;\n\t\t\t\tif (lineWidth <= 0) lineWidth = board.minLineWidth;\n\n\t\t\t\t// TODO: make sure calculations is correct\n\t\t\t\tthis.drawHole (Object.assign ({}, pad, {\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y,\n\t\t\t\t\tstrokeWidth: lineWidth,\n\t\t\t\t\tstrokeStyle: board.viaPadColor(), // ouline/dimension color\n\t\t\t\t}), elemCtx);\n\t\t\t}, this)\n\n\t\t\tpkg.holes.forEach(function(hole) {\n\t\t\t\tvar layerNum = hole.layer;\n\t\t\t\t// We don't need to check layers, holes is pass through all layers\n\t\t\t\tvar x = elem.x + rotMat[0]*hole.x + rotMat[1]*hole.y,\n\t\t\t\t\ty = elem.y + rotMat[2]*hole.x + rotMat[3]*hole.y;\n\n\t\t\t\tthis.drawHole (Object.assign ({}, hole, {\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y,\n\t\t\t\t\tstrokeWidth: board.minLineWidth,\n\t\t\t\t\tstrokeStyle: board.layerColor(15), // ouline/dimension color\n\t\t\t\t}), elemCtx);\n\n\t\t\t}, this)\n\n\t\t\tvar smashed = elem.smashed,\n\t\t\t\tabsText = elem.absText === undefined ? elem.smashed : elem.absText,\n\t\t\t\ttextCollection = smashed ? elem.attributes : pkg.texts;\t//smashed : use element attributes instead of package texts\n\t\t\tfor (var textIdx in textCollection) {\n\t\t\t\tif (!textCollection.hasOwnProperty (textIdx)) continue;\n\t\t\t\tvar text = textCollection[textIdx];\n\t\t\t\tif (smashed && (text.display === \"off\" || !text.font)) continue;\n\t\t\t\tvar layerNum = text.layer;\n\t\t\t\tif ((!elem.smashed) && (elem.mirror)) {\n\t\t\t\t\tlayerNum = board.mirrorLayer(layerNum);\n\t\t\t\t}\n\t\t\t\tif (layer.number != layerNum) { continue; }\n\n\t\t\t\tvar content = smashed ? null : text.content,\n\t\t\t\t\tattribName = smashed ? text.name : ((text.content.indexOf('>') == 0) ? text.content.substring(1) : null);\n\t\t\t\tif (attribName == \"NAME\")  { content = elem.name;  }\n\t\t\t\tif (attribName == \"VALUE\") { content = elem.value; }\n\t\t\t\tif (!content) { continue; }\n\n\t\t\t\tvar x = absText ? text.x : (elem.x + rotMat[0]*text.x + rotMat[1]*text.y),\n\t\t\t\t\ty = absText ? text.y : (elem.y + rotMat[2]*text.x + rotMat[3]*text.y),\n\t\t\t\t\trot = smashed ? text.rot : elem.rot,\n\t\t\t\t\tflipText = smashed ? text.flipText : elem.flipText,\n\t\t\t\t\tsize = text.size;\n\n\t\t\t\tif (!text.size) continue;\n\n\t\t\t\tthis.drawText ({\n\t\t\t\t\tx: x, y: y, content: content, color: color, rot: rot, flipText: flipText\n\t\t\t\t}, text, elemCtx);\n\t\t\t}\n\t\t}\n\t}\n\n\tViewEERenderer.prototype.dimCanvas = function(ctx, alpha) {\n\t\tctx.save();\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.globalCompositeOperation = 'destination-out';\n\t\tctx.fillStyle = 'rgba(0,0,0,'+alpha+')'\n\t\tctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\t\tctx.restore();\n\t};\n\n\treturn ViewEERenderer;\n\n}));\n"]}