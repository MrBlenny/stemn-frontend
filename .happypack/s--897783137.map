{"version":3,"sources":["app\\renderer\\assets\\other\\gerber\\js\\viewee.js"],"names":[],"mappings":"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","file":"viewee.js","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["import EagleXMLParser from './parse/eagle.js';\nimport KicadNewParser from './parse/kicad_pcb_parser.js';\nimport ViewEECanvasRenderer from './render/viewee-canvas.js';\n\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(function () {\n            return factory();\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory();\n    } else {\n        root.ViewEE = factory();\n    }\n}(this, function () {\n    function ViewEE() {\n        this.visibleLayers = {};\n        this.visibleLayers[ViewEE.LayerId.BOTTOM_COPPER] = true;\n        this.visibleLayers[ViewEE.LayerId.BOTTOM_SILKSCREEN] = true;\n        this.visibleLayers[ViewEE.LayerId.BOTTOM_DOCUMENTATION] = true;\n        this.visibleLayers[ViewEE.LayerId.DIM_BOARD] = true;\n        this.visibleLayers[ViewEE.LayerId.TOP_COPPER] = true;\n        this.visibleLayers[ViewEE.LayerId.TOP_SILKSCREEN] = true;\n        this.visibleLayers[ViewEE.LayerId.TOP_DOCUMENTATION] = true;\n        this.visibleLayers[ViewEE.LayerId.VIAS] = true;\n        this.visibleLayers[ViewEE.LayerId.OUTLINE] = true;\n\n        this.renderLayerOrder = [];\n        this.renderLayerOrder.push(ViewEE.LayerId.BOTTOM_DOCUMENTATION);\n        this.renderLayerOrder.push(ViewEE.LayerId.BOTTOM_SILKSCREEN);\n        this.renderLayerOrder.push(ViewEE.LayerId.BOTTOM_COPPER);\n        this.renderLayerOrder.push(ViewEE.LayerId.DIM_BOARD);\n        this.renderLayerOrder.push(ViewEE.LayerId.OUTLINE);\n        this.renderLayerOrder.push(ViewEE.LayerId.TOP_COPPER);\n        this.renderLayerOrder.push(ViewEE.LayerId.VIAS);\n        this.renderLayerOrder.push(ViewEE.LayerId.TOP_SILKSCREEN);\n        this.renderLayerOrder.push(ViewEE.LayerId.TOP_DOCUMENTATION);\n\n        this.reverseRenderLayerOrder = [];\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.TOP_DOCUMENTATION);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.TOP_SILKSCREEN);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.TOP_COPPER);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.DIM_BOARD);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.OUTLINE);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.BOTTOM_COPPER);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.VIAS);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.BOTTOM_SILKSCREEN);\n        this.reverseRenderLayerOrder.push(ViewEE.LayerId.BOTTOM_DOCUMENTATION);\n\n        this.layerRenderFunctions = {};\n\n        this.layerRenderFunctions[ViewEE.LayerId.BOTTOM_COPPER] = function (renderer, board, ctx) {\n            renderer.drawSignalWires(board.eagleLayersByName['Bottom'], ctx);\n            renderer.drawElements(board.eagleLayersByName['Bottom'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['Bottom'], ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.BOTTOM_SILKSCREEN] = function (renderer, board, ctx) {\n            renderer.drawElements(board.eagleLayersByName['bNames'], ctx);\n            renderer.drawElements(board.eagleLayersByName['bValues'], ctx);\n            renderer.drawElements(board.eagleLayersByName['bPlace'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['bNames'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['bValues'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['bPlace'], ctx);\n            renderer.drawPlainWires(board.eagleLayersByName['bNames'], ctx);\n            renderer.drawPlainWires(board.eagleLayersByName['bValues'], ctx);\n            renderer.drawPlainWires(board.eagleLayersByName['bPlace'], ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.BOTTOM_DOCUMENTATION] = function (renderer, board, ctx) {\n            renderer.drawElements(board.eagleLayersByName['bKeepout'], ctx);\n            renderer.drawElements(board.eagleLayersByName['bDocu'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['bKeepout'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['bDocu'], ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.TOP_COPPER] = function (renderer, board, ctx) {\n            renderer.drawSignalWires(board.eagleLayersByName['Top'], ctx);\n            renderer.drawElements(board.eagleLayersByName['Top'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['Top'], ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.TOP_SILKSCREEN] = function (renderer, board, ctx) {\n            renderer.drawElements(board.eagleLayersByName['tNames'], ctx);\n            renderer.drawElements(board.eagleLayersByName['tValues'], ctx);\n            renderer.drawElements(board.eagleLayersByName['tPlace'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['tNames'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['tValues'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['tPlace'], ctx);\n            renderer.drawPlainWires(board.eagleLayersByName['tNames'], ctx);\n            renderer.drawPlainWires(board.eagleLayersByName['tValues'], ctx);\n            renderer.drawPlainWires(board.eagleLayersByName['tPlace'], ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.TOP_DOCUMENTATION] = function (renderer, board, ctx) {\n            renderer.drawElements(board.eagleLayersByName['tKeepout'], ctx);\n            renderer.drawElements(board.eagleLayersByName['tDocu'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['tKeepout'], ctx);\n            renderer.drawPlainTexts(board.eagleLayersByName['tDocu'], ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.DIM_BOARD] = function (renderer, board, ctx) {\n            renderer.dimCanvas(board.dimBoardAlpha, ctx);\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.VIAS] = function (renderer, board, ctx) {\n            renderer.drawSignalVias('1-16', ctx, board.viaPadColor());\n        }\n\n        this.layerRenderFunctions[ViewEE.LayerId.OUTLINE] = function (renderer, board, ctx) {\n            renderer._drawShapeFromWires(board.eagleLayersByName['Dimension'], ctx);\n            renderer.drawPlainHoles(board.eagleLayersByName['Dimension'], ctx);\n        }\n\n        this.render = render;\n        this.draw = draw;\n        this.redraw = redraw;\n        this.initRenderer = initRenderer;\n        this.calculateBounds = calculateBounds;\n        this.scaleToFit = scaleToFit;\n        this.setScale = setScale;\n\n        this.layerColor = layerColor;\n        this.mirrorLayer = mirrorLayer;\n\n        this.angleForRot = angleForRot;\n        this.matrixForRot = matrixForRot;\n\n        this.viaPadColor = viaPadColor;\n        this.colorPalette = [\n            [127, 127, 127],\n            [35, 35, 141],\n            [35, 141, 35],\n            [35, 141, 141],\n            [141, 35, 35],\n            [141, 35, 141],\n            [141, 141, 35],\n            [141, 141, 141],\n            [39, 39, 39],\n            [0, 0, 180],\n            [0, 180, 0],\n            [0, 180, 180],\n            [180, 0, 0],\n            [180, 0, 180],\n            [180, 180, 0],\n            [63, 63, 63],\n        ];\n    }\n\n    // -----------------------\n    // --- ENUMS, DEFAULTS ---\n    // -----------------------\n\n    ViewEE.LayerId = {\n        'BOTTOM_COPPER': 1,\n        'BOTTOM_SILKSCREEN': 2,\n        'BOTTOM_DOCUMENTATION': 3,\n        'DIM_BOARD': 4,\n        'TOP_COPPER': 5,\n        'TOP_SILKSCREEN': 6,\n        'TOP_DOCUMENTATION': 7,\n        'VIAS': 8,\n        'OUTLINE': 9\n    }\n\n    ViewEE.LARGE_NUMBER = 99999;\n\n    ViewEE.warnings = {};\n\n    ViewEE.prototype.scale = 1;\n    ViewEE.prototype.minScale = 0.1;\n    ViewEE.prototype.maxScale = 10;\n    ViewEE.prototype.minLineWidth = 0.05;\n    ViewEE.prototype.boardFlipped = false;\n    ViewEE.prototype.dimBoardAlpha = 0.7;\n\n    // -------------------------\n    // --- GENERIC ACCESSORS ---\n    // -------------------------\n\n    function scaleToFit(a) {\n        var fitElement = this.canvas;\n        var fitWidth = fitElement.width,\n            fitHeight = fitElement.height,\n            scaleX = fitWidth / this.nativeSize[0],\n            scaleY = fitHeight / this.nativeSize[1],\n            scale = Math.min(scaleX, scaleY);\n\n        this.baseScale = scale;\n        this.minScale = scale / 10;\n        this.maxScale = scale * 10;\n        this.setScale(1);\n    }\n\n    /** sets the scale factor, triggers resizing and redrawing */\n    function setScale(scale, noResize) {\n        // console.log (scale, this.scale, this.baseScale);\n        console.time && console.time('scale');\n\n        this.scale = scale // * (this.scale || 1);\n\n        var fitElement = this.scaleToFitSelector ? document.querySelector(this.scaleToFitSelector) : this.canvas;\n        if (!fitElement) {\n            return;\n        }\n        var fitWidth = fitElement.offsetWidth,\n            fitHeight = fitElement.offsetHeight;\n\n        var scrollX = (fitElement.scrollLeft + fitElement.clientWidth / 2) / fitElement.scrollWidth;\n        var scrollY = (fitElement.scrollTop + fitElement.clientHeight / 2) / fitElement.scrollHeight;\n\n\n        // console.log ('scroll amount: %s, position: %s, width: %s', scrollX, fitElement.scrollLeft, fitElement.scrollWidth);\n\n        if ('svg' in this) {\n            // this.svg.setAttributeNS (null, 'width', scale * this.baseScale * this.nativeSize[0]);\n            // this.svg.setAttributeNS (null, 'height', scale * this.baseScale * this.nativeSize[1]);\n\n            this.svg.style.width = scale * this.baseScale * this.nativeSize[0] + \"px\"; // fitElement.offsetWidth //\n            this.svg.style.height = scale * this.baseScale * this.nativeSize[1] + \"px\"; // fitElement.offsetHeight //\n\n        } else if ('canvas' in this) {\n\n            var canvas = this.canvas;\n            var context = canvas.getContext('2d'),\n                devicePixelRatio = window.devicePixelRatio || 1,\n                backingStoreRatio =\n                context.webkitBackingStorePixelRatio ||\n                context.mozBackingStorePixelRatio ||\n                context.msBackingStorePixelRatio ||\n                context.oBackingStorePixelRatio ||\n                context.backingStorePixelRatio || 1,\n                ratio = devicePixelRatio / backingStoreRatio;\n\n            if (!noResize) {\n                canvas.width = scale * this.baseScale * this.nativeSize[0] * ratio;\n                canvas.height = scale * this.baseScale * this.nativeSize[1] * ratio;\n\n                canvas.style.width = scale * this.baseScale * this.nativeSize[0] + \"px\";\n                canvas.style.height = scale * this.baseScale * this.nativeSize[1] + \"px\";\n            }\n\n            this.canvasWidth = scale * this.baseScale * this.nativeSize[0] * ratio;\n            this.canvasHeight = scale * this.baseScale * this.nativeSize[0] * ratio;\n\n            this.ratio = ratio;\n\n        }\n        fitElement.scrollLeft = scrollX * fitElement.scrollWidth - fitElement.clientWidth / 2;\n        fitElement.scrollTop = scrollY * fitElement.scrollHeight - fitElement.clientHeight / 2;\n        this.redraw();\n    }\n\n\n    function draw() {\n        if (!this.renderer) this.initRenderer();\n        this.renderer.draw();\n        // Stemn Change - Add a Draw callback!\n        if (this.drawCallback) {\n            this.drawCallback();\n        }\n    }\n\n    function redraw() {\n        if (!this.renderer) this.initRenderer();\n        this.renderer.redraw();\n    }\n\n    function initRenderer() {\n        this.renderer = new ViewEECanvasRenderer(this);\n    }\n\n    // ---------------\n    // --- PARSERS ---\n    // ---------------\n\n    ViewEE.parsers = [];\n\n    if (EagleXMLParser) {\n        ViewEE.parsers.push(EagleXMLParser);\n    }\n\n    if (KicadNewParser) {\n        ViewEE.parsers.push(KicadNewParser);\n    }\n\n//    if (\"AltiumParser\" in window) {\n//        ViewEE.parsers.push(window.AltiumParser);\n//    }\n//\n//    if (\"GEDAParser\" in window) {\n//        ViewEE.parsers.push(window.GEDAParser);\n//    }\n\n    ViewEE.prototype.findParser = function (text) {\n        var board = {};\n        var parserFound = ViewEE.parsers.some(function (parser) {\n            if (!parser) return;\n            if (parser.supports(text)) {\n                var timerLabel = 'parsing using ' + parser.name;\n                var parser = new parser(this);\n                parser.parse(text);\n                var bounds = this.calculateBounds();\n                board = this;\n                board.bounds = {\n                    minX: bounds[0],\n                    minY: bounds[1],\n                    maxX: bounds[2],\n                    maxY: bounds[3],\n                }\n                board.type = 'pcb';\n\n                this.nativeBounds = bounds;\n                this.nativeSize = [this.nativeBounds[2] - this.nativeBounds[0], this.nativeBounds[3] - this.nativeBounds[1]];\n\n                return true;\n            }\n        }, this);\n\n        if (!parserFound){\n            board.error = 'Cannot find parser for selected file';\n        }\n\n        return board;\n    }\n\n    function render(canvas, side) {\n        this.canvas = canvas;\n        this.scaleToFit();\n        this.draw();\n\n    //        var ctx = canvas.getContext('2d');\n    //\n    //        ctx.globalCompositeOperation = 'xor';\n    //        ctx.beginPath();\n    //        ctx.fillStyle = 'black'\n    //        ctx.rect(100,100,100,100);\n    //        ctx.fill();\n\n    }\n\n\n    // --------------------\n    // --- COMMON UTILS ---\n    // --------------------\n\n    ViewEE.prototype.calcBBox = function (wires) {\n        var bbox = [\n        ViewEE.LARGE_NUMBER,\n        ViewEE.LARGE_NUMBER,\n        -ViewEE.LARGE_NUMBER,\n        -ViewEE.LARGE_NUMBER\n    ];\n        wires.forEach(function (wireDict) {\n            if (wireDict.x1 < bbox[0]) {\n                bbox[0] = wireDict.x1;\n            }\n            if (wireDict.x1 > bbox[2]) {\n                bbox[2] = wireDict.x1;\n            }\n            if (wireDict.y1 < bbox[1]) {\n                bbox[1] = wireDict.y1;\n            }\n            if (wireDict.y1 > bbox[3]) {\n                bbox[3] = wireDict.y1;\n            }\n            if (wireDict.x2 < bbox[0]) {\n                bbox[0] = wireDict.x2;\n            }\n            if (wireDict.x2 > bbox[2]) {\n                bbox[2] = wireDict.x2;\n            }\n            if (wireDict.y2 < bbox[1]) {\n                bbox[1] = wireDict.y2;\n            }\n            if (wireDict.y2 > bbox[3]) {\n                bbox[3] = wireDict.y2;\n            }\n        });\n        if ((bbox[0] >= bbox[2]) || (bbox[1] >= bbox[3])) {\n            bbox = null;\n        }\n\n        return bbox;\n    }\n\n    function layerColor (colorIdx) {\n        var rgb = this.colorPalette[colorIdx];\n        if (!rgb) {\n            console.warn(\"color %s not defined, using default color\", colorIdx, this.colorPalette[0]);\n            rgb = this.colorPalette[colorIdx] = this.colorPalette[0];\n        }\n        return 'rgb(' + rgb[0] + ',' + rgb[1] + ',' + rgb[2] + ')';\n    }\n\n    ViewEE.prototype.highlightColor = function (colorIdx) {\n        var rgb = this.colorPalette[colorIdx];\n        if (!rgb) {\n            console.warn(\"color %s not defined, using default color\", colorIdx, this.colorPalette[0]);\n            rgb = this.colorPalette[colorIdx] = this.colorPalette[0];\n        }\n        return 'rgb(' + (rgb[0] + 50) + ',' + (rgb[1] + 50) + ',' + (rgb[2] + 50) + ')';\n    }\n\n    function viaPadColor() {\n        return \"#0b0\";\n    }\n\n    function angleForRot(rot) {\n        if (!rot) return {\n            degrees: 0\n        };\n        var spin = (rot.indexOf('S') >= 0), // TODO: spin rotate\n            flipped = (rot.indexOf('M') >= 0),\n            degrees = parseFloat(rot.split('R')[1]);\n        return {\n            spin: spin,\n            flipped: flipped,\n            degrees: degrees\n        };\n    }\n\n    function matrixForRot(rot) {\n        var angle = this.angleForRot(rot);\n        var spin = angle.spin, // TODO: spin rotate\n            flipped = angle.flipped,\n            degrees = angle.degrees,\n            rad = degrees * Math.PI / 180.0,\n            flipSign = flipped ? -1 : 1,\n            matrix = [\n            flipSign * Math.cos(rad),\n            flipSign * -Math.sin(rad),\n            Math.sin(rad),\n            Math.cos(rad)\n        ];\n        return matrix;\n    }\n\n    function mirrorLayer(layerIdx) {\n        if (layerIdx == 1) {\n            return 16;\n        } else if (layerIdx == 16) {\n            return 1;\n        }\n        var name = this.layersByNumber[layerIdx].name,\n            prefix = name.substring(0, 1);\n        if (prefix == 't') {\n            var mirrorName = 'b' + name.substring(1),\n                mirrorLayer = this.eagleLayersByName[mirrorName];\n            if (mirrorLayer) {\n                return mirrorLayer.number;\n            }\n        } else if (prefix == 'b') {\n            var mirrorName = 't' + name.substring(1),\n                mirrorLayer = this.eagleLayersByName[mirrorName];\n            if (mirrorLayer) {\n                return mirrorLayer.number;\n            }\n        }\n        return layerIdx;\n    }\n\n    function max() {\n        var args = [].slice.call(arguments);\n        return Math.max.apply(Math, args.filter(function (val) {\n            return !isNaN(val);\n        }));\n    }\n\n    function min() {\n        var args = [].slice.call(arguments);\n        return Math.min.apply(Math, args.filter(function (val) {\n            return !isNaN(val);\n        }));\n    }\n\n    function calculateBounds() {\n        var minX = ViewEE.LARGE_NUMBER,\n            minY = ViewEE.LARGE_NUMBER,\n            maxX = -ViewEE.LARGE_NUMBER,\n            maxY = -ViewEE.LARGE_NUMBER;\n        //Plain elements\n        for (var layerKey in this.plainWires) {\n            var lines = this.plainWires[layerKey];\n            for (var lineKey in lines) {\n                var line = lines[lineKey],\n                    x1 = line.x1,\n                    x2 = line.x2,\n                    y1 = line.y1,\n                    y2 = line.y2,\n                    width = line.width || this.minLineWidth;\n                minX = min(minX, x1 - width, x1 + width, x2 - width, x2 + width);\n                maxX = max(maxX, x1 - width, x1 + width, x2 - width, x2 + width);\n                minY = min(minY, y1 - width, y1 + width, y2 - width, y2 + width);\n                maxY = max(maxY, y1 - width, y1 + width, y2 - width, y2 + width);\n            }\n        }\n\n        for (var netName in this.signalItems) {\n            for (var layerKey in this.signalItems[netName]) {\n                var lines = this.signalItems[netName][layerKey].wires;\n                for (var lineKey in lines) {\n                    var line = lines[lineKey],\n                        x1 = line.x1,\n                        x2 = line.x2,\n                        y1 = line.y1,\n                        y2 = line.y2,\n                        width = line.width || this.minLineWidth;\n                    minX = min(minX, x1 - width, x1 + width, x2 - width, x2 + width);\n                    maxX = max(maxX, x1 - width, x1 + width, x2 - width, x2 + width);\n                    minY = min(minY, y1 - width, y1 + width, y2 - width, y2 + width);\n                    maxY = max(maxY, y1 - width, y1 + width, y2 - width, y2 + width);\n                }\n            }\n        }\n\n        //Elements\n        for (var elemKey in this.elements) {\n            var elem = this.elements[elemKey];\n            var pkg = typeof elem.pkg === \"string\" ? this.packagesByName[elem.pkg] : elem.pkg;\n            var rotMat = elem.matrix;\n            for (var smdIdx in pkg.smds) {\n                var smd = pkg.smds[smdIdx],\n                    x1 = elem.x + rotMat[0] * smd.x1 + rotMat[1] * smd.y1,\n                    y1 = elem.y + rotMat[2] * smd.x1 + rotMat[3] * smd.y1,\n                    x2 = elem.x + rotMat[0] * smd.x2 + rotMat[1] * smd.y2,\n                    y2 = elem.y + rotMat[2] * smd.x2 + rotMat[3] * smd.y2;\n                minX = min(minX, x1, x2);\n                maxX = max(maxX, x1, x2);\n                minY = min(minY, y1, y2);\n                maxY = max(maxY, y1, y2);\n            }\n            for (var wireIdx in pkg.wires) {\n                var wire = pkg.wires[wireIdx],\n                    x1 = elem.x + rotMat[0] * wire.x1 + rotMat[1] * wire.y1,\n                    y1 = elem.y + rotMat[2] * wire.x1 + rotMat[3] * wire.y1,\n                    x2 = elem.x + rotMat[0] * wire.x2 + rotMat[1] * wire.y2,\n                    y2 = elem.y + rotMat[2] * wire.x2 + rotMat[3] * wire.y2,\n                    width = wire.width || this.minLineWidth;\n                minX = min(minX, x1 - width, x1 + width, x2 - width, x2 + width);\n                maxX = max(maxX, x1 - width, x1 + width, x2 - width, x2 + width);\n                minY = min(minY, y1 - width, y1 + width, y2 - width, y2 + width);\n                maxY = max(maxY, y1 - width, y1 + width, y2 - width, y2 + width);\n            }\n        }\n        return [minX, minY, maxX, maxY];\n    }\n\n    return ViewEE;\n}));\n\n\n\n\n\n"]}