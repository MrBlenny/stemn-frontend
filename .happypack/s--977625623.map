{"version":3,"sources":["app\\renderer\\main\\modules\\Files\\PreviewFile\\PreviewCad\\PreviewCad.utils.js"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAM,UAAU;AACd,gBAAc,YADA;AAEd,iBAAe,aAFD;AAGd,oBAAkB,gBAHJ;AAId,UAAQ;AAJM,CAAhB;;kBAOe,O;;AAEf;;AAEA,SAAS,MAAT,OAAgD;AAAA,MAA/B,SAA+B,QAA/B,SAA+B;AAAA,MAApB,MAAoB,QAApB,MAAoB;AAAA,MAAZ,UAAY,QAAZ,UAAY;;AAC9C,SAAO,qBAAK;AACV,YAAQ,KADE;AAEV,oCAA8B,SAA9B,SAA2C,MAFjC;AAGV,YAAQ;AACN,kBAAY;AADN;AAHE,GAAL,CAAP;AAOD;;AAED,SAAS,YAAT,GAAuB;AACrB,SAAO,qBAAK;AACV,YAAQ,MADE;AAEV;AAFU,GAAL,EAGJ,IAHI,CAGC,UAAS,QAAT,EAAkB;AACxB,YAAQ,WAAR,GAAsB,SAAS,IAAT,CAAc,KAApC;AACA,WAAO,QAAP;AACD,GANM,CAAP;AAOD;;AAED,SAAS,aAAT,CAAuB,KAAvB,EAA6B;AAC3B,SAAO,qBAAK;AACV,YAAQ,KADE;AAEV,SAAK,0DAAwD,KAAxD,GAA8D,SAFzD;AAGV,aAAS;AACP,qBAAe,YAAY,QAAQ;AAD5B;AAHC,GAAL,CAAP;AAOD;;AAED,SAAS,gBAAT,CAA0B,cAA1B,EAA0C;AACtC,MAAI,CAAC,CAAC,OAAO,qBAAb,EAAoC;AAChC,QAAI,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAb;AAAA,QACK,QAAQ,CAAC,OAAD,EAAU,oBAAV,EAAgC,WAAhC,EAA6C,WAA7C,CADb;AAAA,QAEG,UAAU,KAFb;;AAIA,SAAI,IAAI,IAAE,CAAV,EAAY,IAAE,CAAd,EAAgB,GAAhB,EAAqB;AACjB,UAAI;AACA,kBAAU,OAAO,UAAP,CAAkB,MAAM,CAAN,CAAlB,CAAV;AACA,YAAI,WAAW,OAAO,QAAQ,YAAf,IAA+B,UAA9C,EAA0D;AACtD;AACA,cAAI,cAAJ,EAAoB;AAChB;AACA,mBAAO,EAAC,MAAK,MAAM,CAAN,CAAN,EAAgB,IAAG,OAAnB,EAAP;AACH;AACD;AACA,iBAAO,IAAP;AACH;AACJ,OAXD,CAWE,OAAM,CAAN,EAAS,CAAE;AAChB;AACD;AACA,WAAO,KAAP;AACH;AACD;AACA,SAAO,KAAP;AACH","file":"PreviewCad.utils.js","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["import http from 'axios';\n\nconst library = {\n  authenticate: authenticate,\n  getViewStatus: getViewStatus,\n  isWebGlSupported: isWebGlSupported,\n  render: render,\n}\n\nexport default library\n\n////////////////////////////////////////////\n\nfunction render({projectId, fileId, revisionId}){\n  return http({\n    method: 'GET',\n    url: `/api/v1/remote/render/${projectId}/${fileId}`,\n    params: {\n      revisionId: revisionId\n    }\n  })\n}\n\nfunction authenticate(){\n  return http({\n    method: 'POST',\n    url: `/api/v1/auth/autodesk`,\n  }).then(function(response){\n    library.accessToken = response.data.token;\n    return response\n  })\n}\n\nfunction getViewStatus(urn64){\n  return http({\n    method: 'GET',\n    url: 'https://developer.api.autodesk.com/viewingservice/v1/'+urn64+'/status',\n    headers: {\n      Authorization: 'Bearer ' + library.accessToken\n    }\n  })\n}\n\nfunction isWebGlSupported(return_context) {\n    if (!!window.WebGLRenderingContext) {\n        var canvas = document.createElement(\"canvas\"),\n             names = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"],\n           context = false;\n\n        for(var i=0;i<4;i++) {\n            try {\n                context = canvas.getContext(names[i]);\n                if (context && typeof context.getParameter == \"function\") {\n                    // WebGL is enabled\n                    if (return_context) {\n                        // return WebGL object if the function's argument is present\n                        return {name:names[i], gl:context};\n                    }\n                    // else, return just true\n                    return true;\n                }\n            } catch(e) {}\n        }\n        // WebGL is supported, but disabled\n        return false;\n    }\n    // WebGL not supported\n    return false;\n}\n"]}