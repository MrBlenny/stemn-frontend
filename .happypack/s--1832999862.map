{"version":3,"sources":["app\\renderer\\main\\modules\\FileCompare\\FileCompareCollapse\\FileCompareCollapse.jsx"],"names":[],"mappings":"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","file":"FileCompareCollapse.jsx","sourceRoot":"C:/Users/david/repositories/stemn-electron-2","sourcesContent":["import React from 'react';\n\nimport classes            from './FileCompareCollapse.css';\n\nimport TogglePanel        from 'app/renderer/main/components/Panels/TogglePanel/TogglePanel.jsx';\nimport DragResize         from 'app/renderer/main/modules/DragResize/DragResize.jsx';\nimport FileCompareMenu    from 'app/renderer/main/modules/FileCompare/FileCompareMenu/FileCompareMenu.jsx';\nimport FileCompareInner   from 'app/renderer/main/modules/FileCompare/FileCompareInner/FileCompareInner.jsx';\nimport Timeline           from 'app/renderer/main/modules/Timeline/Timeline.jsx';\nimport { orderBy, has }   from 'lodash';\n\nexport default React.createClass({\n  // Mounting\n  onMount(nextProps, prevProps){\n    if(!prevProps || nextProps.file != prevProps.file){\n      this.setState({\n        selected1: nextProps.file.revisions[0],\n        selected2: nextProps.file.revisions[1],\n        lastSelected: 1,\n        mode: nextProps.file.revisions[0] && nextProps.file.revisions[1] ? 'sideBySide' : 'single'\n      })\n    }\n  },\n  componentWillMount() { this.onMount(this.props) },\n  componentWillReceiveProps(nextProps) { this.onMount(nextProps, this.props)},\n\n\n  onSelect(response){\n    if(this.state.mode == 'single'){\n      this.setState({\n        selected1: response,\n        lastSelected: 1\n      })\n    }\n    else{\n      if(this.state.lastSelected == 1){\n        this.setState({\n          selected2: response,\n          lastSelected: 2\n        })\n      }\n      else{\n        this.setState({\n          selected1: response,\n          lastSelected: 1\n        })\n      }\n    }\n  },\n  changeMode(mode){\n    this.setState({mode: mode})\n  },\n  isSelected(item){\n    const selected1 = has(this.state, 'selected1.data.revisionId') ? item.data.revisionId == this.state.selected1.data.revisionId : false;\n    const selected2 = has(this.state, 'selected2.data.revisionId') ? item.data.revisionId == this.state.selected2.data.revisionId : false;\n    return this.state.mode == 'single' ? selected1 : selected1 || selected2;\n  },\n  render() {\n    const { file, project } = this.props;\n    const { mode, selected1, selected2 } = this.state;\n    console.log(selected1, selected2 );\n    const items = mode == 'single' ? [selected1, selected1] : orderBy([selected1, selected2], item => (new Date(item.timestamp)).getTime());\n    return (\n      <TogglePanel>\n        <div>{file.data.path}</div>\n        <FileCompareMenu\n          file1={items[1].data}\n          file2={items[0].data}\n          revisions={file.revisions}\n          mode={mode}\n          changeMode={this.changeMode}\n          enablePreview={true}\n        />\n        <DragResize side=\"bottom\" height=\"500\" heightRange={[0, 1000]} className=\"layout-column flex\">\n          <FileCompareInner\n            project={project.data}\n            file1={items[1].data}\n            file2={items[0].data}\n            mode={mode} />\n          <Timeline className={classes.timeline}\n            size=\"sm\"\n            onSelect={this.onSelect}\n            isSelected={this.isSelected}\n            items={file.revisions}\n            preferPlace=\"above\" />\n        </DragResize>\n      </TogglePanel>\n    )\n  }\n})\n"]}